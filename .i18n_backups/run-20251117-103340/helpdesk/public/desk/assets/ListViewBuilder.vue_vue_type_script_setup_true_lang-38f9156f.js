import{a0 as Y,e as o,k as g,C as H,l as p,v as Q,h as e,f as C,ac as me,a1 as de,y as z,A as le,c as B,b_ as $t,D as ve,E as ye,a9 as ue,z as he,be as Oe,F as oe,G as ne,am as Te,x as fe,g as m,w as k,M as tt,j as pe,t as lt,b$ as Vt,b7 as St,p as Re,a4 as je,a8 as ze,r as we,Y as Ee,b as ot,q as u,al as Ce,bj as Me,aa as re,R as st,H as Lt,K as ee,c0 as Rt,c1 as At,N as nt,aq as Ue,c2 as jt,c3 as Be,O as Dt,bg as qt,c4 as Ft,av as Nt,ar as Mt,as as It,c5 as zt,c6 as Bt,c7 as Ot,d as Tt,s as Et,u as Ut,a as Ht,ap as Wt,X as Pt,Q as Kt,W as Se,aR as Gt,P as Zt,ad as Jt,c8 as Qt}from"./index-0570e060.js";import{D as at}from"./Dropdown-1e1fbbdd.js";import{T as Yt}from"./TabButtons-1f731739.js";import{S as Xt,D as el,v as tl,g as ll,u as ol,y as Ie,x as sl,c as Le}from"./TypingIndicator.vue_vue_type_style_index_0_scoped_3f215bd3_lang-f290abcf.js";import"./dayjs-2cebe90e.js";import"./LayoutHeader-6b26ba5d.js";import{_ as it,D as rt}from"./DateTimePicker-2f0425b4.js";import{_ as nl}from"./DateRangePicker.vue_vue_type_script_setup_true_lang-237a353f.js";import{a as ut,_ as Ae}from"./Link-3bf01fe5.js";import{_ as ct}from"./StarRating.vue_vue_type_script_setup_true_lang-ecf3e22e.js";import{_ as al,G as il,j as rl,y as ul}from"./NestedPopover-cbe976a0.js";import{a as cl,_ as dl}from"./MultipleAvatar.vue_vue_type_script_setup_true_lang-1c7f3694.js";import{u as fl}from"./ticketStatus-329a9615.js";const pl={class:"flex h-full w-full flex-col items-center justify-center text-base"},ml={class:"text-xl font-medium"},vl={class:"mt-1 text-base text-ink-gray-5"},hl={__name:"ListEmptyState",setup(t){const s=Y("list");return(l,n)=>(o(),g("div",pl,[H(l.$slots,"default",{},()=>[p("div",ml,Q(e(s).options.emptyState.title),1),p("div",vl,Q(e(s).options.emptyState.description),1),e(s).options.emptyState.button?(o(),C(e(de),me({key:0},e(s).options.emptyState.button,{class:"mt-4"}),null,16)):z("",!0)])]))}};function dt(t,s=!0){let l=s?"14px ":"",n=t.map(v=>{let i=v.width||1;return typeof i=="number"?i+"fr":i}).join(" ");return l+n}const He={left:"justify-start",start:"justify-start",center:"justify-center",middle:"justify-center",right:"justify-end",end:"justify-end"},wl={class:"truncate"},ft={__name:"ListHeaderItem",props:{item:{type:Object,required:!0},debounce:{type:Number,default:1e3}},emits:["columnWidthUpdated"],setup(t,{emit:s}){const l=t,n=s,v=le(null),i=le(null),f=B(()=>{if(typeof l.item.width=="string"){const d=parseInt(l.item.width);if(l.item.width.includes("rem"))return d*16;if(l.item.width.includes("px"))return d}return i.value.offsetWidth}),c=d=>{const x=d.clientX,R=f.value,w=I=>{document.body.classList.add("select-none"),document.body.classList.add("cursor-col-resize"),v.value.style.backgroundColor="rgb(199 199 199)";let h=R+(I.clientX-x);l.item.width=`${h<50?50:h}px`,_(l.item.width)},b=()=>{document.body.classList.remove("select-none"),document.body.classList.remove("cursor-col-resize"),v.value.style.backgroundColor="",window.removeEventListener("mousemove",w),window.removeEventListener("mouseup",b)};window.addEventListener("mousemove",w),window.addEventListener("mouseup",b)},_=$t(d=>{l.item.width=d,n("columnWidthUpdated")},l.debounce),A=Y("list");return(d,x)=>(o(),g("div",{ref_key:"columnRef",ref:i,class:ue(["group relative flex items-center",t.item.align?e(He)[t.item.align]:"justify-between"])},[p("div",{class:ue(["flex items-center space-x-2 truncate text-sm text-ink-gray-5",d.$attrs.class])},[H(d.$slots,"prefix",ve(ye({item:t.item}))),H(d.$slots,"default",{},()=>[p("div",wl,Q(t.item.label),1)]),H(d.$slots,"suffix",ve(ye({item:t.item})))],2),e(A).options.resizeColumn?H(d.$slots,"resizer",ve(me({key:0},{item:t.item})),()=>[p("div",{class:"flex h-4 absolute -right-2 w-2 cursor-col-resize justify-center",onMousedown:c},[p("div",{ref_key:"resizer",ref:v,class:"h-full w-[2px] rounded-full transition-all duration-300 ease-in-out group-hover:bg-gray-400"},null,512)],32)]):z("",!0)],2))}},pt={__name:"ListHeader",emits:["columnWidthUpdated"],setup(t,{emit:s}){const l=s,n=Y("list");return(v,i)=>(o(),g("div",{class:"mb-2 grid items-center space-x-4 rounded bg-surface-gray-2 p-2",style:Te({gridTemplateColumns:e(dt)(e(n).columns,e(n).options.selectable)})},[e(n).options.selectable?(o(),C(Oe,{key:0,class:"cursor-pointer duration-300",modelValue:e(n).allRowsSelected,onClick:he(e(n).toggleAllRows,["stop"])},null,8,["modelValue","onClick"])):z("",!0),H(v.$slots,"default",{},()=>[(o(!0),g(oe,null,ne(e(n).columns,f=>(o(),C(ft,{key:f.key,item:f,onColumnWidthUpdated:c=>l("columnWidthUpdated",f)},null,8,["item","onColumnWidthUpdated"]))),128))])],4))}},yl={class:"truncate text-base"},mt={__name:"ListRowItem",props:{column:{type:Object,default:{}},row:{type:Object,default:{}},item:{type:[String,Number,Object],default:""},align:{type:String,default:"left"}},setup(t){const s=t,l=B(()=>{var f,c;return(f=s.column)!=null&&f.getLabel?(c=s.column)==null?void 0:c.getLabel({row:s.row}):v(s.item).label||""}),n=B(()=>i.value.options.showTooltip?s.column.getTooltip?s.column.getTooltip(s.row):v(s.item).label:"");function v(f){return f&&typeof f=="object"?f:{label:f}}const i=Y("list");return(f,c)=>(o(),g("div",{class:ue(["flex items-center space-x-2",e(He)[t.align]])},[H(f.$slots,"prefix",{},()=>[t.column.prefix?(o(),C(fe(typeof t.column.prefix=="function"?t.column.prefix({row:t.row}):t.column.prefix),{key:0})):z("",!0)]),m(e(tt),ve(ye(e(i).options.showTooltip?{text:n.value}:{text:""})),{default:k(()=>[H(f.$slots,"default",ve(ye({label:l.value})),()=>[p("div",yl,Q(l.value),1)])]),_:3},16),H(f.$slots,"suffix")],2))}},De={__name:"ListRow",props:{row:{type:Object,required:!0}},setup(t){const s=t,l=Y("list"),n=B(()=>{var d;return(d=l.value.rows)!=null&&d.length?l.value.rows[l.value.rows.length-1][l.value.rowKey]===s.row[l.value.rowKey]:!1}),v=B(()=>l.value.selections.has(s.row[l.value.rowKey])),i=B(()=>l.value.options.enableActive&&l.value.activeRow.value===s.row.name),f=B(()=>l.value.options.getRowRoute||l.value.options.onRowClick),c=B(()=>typeof l.value.options.rowHeight=="number"?`${l.value.options.rowHeight}px`:l.value.options.rowHeight),_=B(()=>{var R,w,b;if(!v.value)return"rounded";const d=[...l.value.selections];let x=(R=l.value.rows[0])!=null&&R.group?l.value.rows.map(I=>I.rows):[l.value.rows];for(let I of x){let h=I.findIndex($=>$==s.row);if(h===-1)continue;let F=!d.includes((w=I[h+1])==null?void 0:w.name),q=!d.includes((b=I[h-1])==null?void 0:b.name);return(F?"rounded-b ":"")+(q?"rounded-t":"")}}),A=(d,x)=>{l.value.options.onRowClick&&l.value.options.onRowClick(d,x),l.value.activeRow.value===d.name?l.value.activeRow.value=null:l.value.activeRow.value=d.name};return(d,x)=>(o(),C(fe(e(l).options.getRowRoute?"router-link":"div"),me({class:[[_.value,v.value||i.value?"bg-surface-gray-2":"",f.value?"cursor-pointer":"",f.value?v.value||i.value?"hover:bg-surface-gray-3":"hover:bg-surface-menu-bar":""],"flex flex-col transition-all duration-300 ease-in-out"]},{to:e(l).options.getRowRoute?e(l).options.getRowRoute(t.row):void 0,onClick:R=>A(t.row,R)}),{default:k(()=>[(o(),C(fe(e(l).options.getRowRoute?"template":"button"),{class:"[all:unset] hover:[all:unset]"},{default:k(()=>{var R,w;return[p("div",{class:"grid items-center space-x-4 px-2",style:Te({height:c.value,gridTemplateColumns:e(dt)(e(l).columns,e(l).options.selectable)})},[e(l).options.selectable?(o(),g("div",{key:0,class:"w-fit pr-2 py-3 flex",onClick:x[1]||(x[1]=he(()=>{},["stop","prevent"])),onDblclick:x[2]||(x[2]=he(()=>{},["stop"]))},[m(Oe,{modelValue:v.value,class:"cursor-pointer duration-300",onClick:x[0]||(x[0]=he(b=>e(l).toggleRow(t.row[e(l).rowKey]),["stop"]))},null,8,["modelValue"])],32)):z("",!0),(o(!0),g(oe,null,ne(e(l).columns,(b,I)=>(o(),g("div",{key:b.key,class:ue([e(He)[b.align],I==0?"text-ink-gray-9":"text-ink-gray-7"])},[H(d.$slots,"default",me({ref_for:!0},{idx:I,column:b,item:t.row[b.key],isActive:i.value}),()=>[e(l).slots.cell?(o(),C(fe(e(l).slots.cell),me({key:0,ref_for:!0},{column:b,row:t.row,item:t.row[b.key],align:b.align}),null,16)):(o(),C(mt,{key:1,column:b,row:t.row,item:t.row[b.key],align:b.align},null,8,["column","row","item","align"]))])],2))),128))],4),n.value?z("",!0):(o(),g("div",{key:0,class:ue(["h-px border-t",_.value==="rounded"||(w=(R=_.value)==null?void 0:R.includes)!=null&&w.call(R,"rounded-b")?"mx-2 border-outline-gray-1":"border-t-[--surface-gray-2]"])},null,2))]}),_:3}))]),_:3},16,["class"]))}},gl={class:"h-full overflow-y-auto"},vt={__name:"ListRows",setup(t){const s=Y("list");return(l,n)=>(o(),g("div",gl,[H(l.$slots,"default",{},()=>[(o(!0),g(oe,null,ne(e(s).rows,v=>(o(),C(De,{key:v[e(s).rowKey],row:v},null,8,["row"]))),128))])]))}},_l={},bl={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16"};function kl(t,s){return o(),g("svg",bl,[...s[0]||(s[0]=[p("path",{fill:"currentColor",d:"M4.293 5.28h7.413a.5.5 0 0 1 .41.787l-3.707 5.295a.5.5 0 0 1-.82 0L3.884 6.067a.5.5 0 0 1 .41-.787Z"},null,-1)])])}const xl=pe(_l,[["render",kl]]),Cl={class:"flex items-center"},$l={class:"w-full py-1.5 pr-2"},Vl={key:1,class:"text-base font-medium leading-6"},ht={__name:"ListGroupHeader",props:{group:{type:Object,required:!0}},setup(t){const s=t,l=Y("list");function n(){s.group.collapsed==null&&(s.group.collapsed=!1),s.group.collapsed=!s.group.collapsed}return(v,i)=>(o(),g(oe,null,[p("div",Cl,[p("button",{onClick:n,class:"ml-[3px] mr-[11px] rounded p-1 hover:bg-surface-gray-2"},[m(xl,{class:ue(["h-4 w-4 text-ink-gray-6 transition-transform duration-200",[t.group.collapsed?"-rotate-90":""]])},null,8,["class"])]),H(v.$slots,"default",{},()=>[p("div",$l,[e(l).slots["group-header"]?(o(),C(fe(e(l).slots["group-header"]),ve(me({key:0},{group:t.group})),null,16)):(o(),g("span",Vl,Q(t.group.group),1))])])]),i[0]||(i[0]=p("div",{class:"mx-2 h-px border-t border-outline-gray-modals"},null,-1))],64))}},Sl={key:0,class:"mb-5 mt-2"},wt={__name:"ListGroupRows",props:{group:{type:Object,required:!0}},setup(t){const s=Y("list");return(l,n)=>t.group.collapsed?z("",!0):(o(),g("div",Sl,[H(l.$slots,"default",{},()=>[(o(!0),g(oe,null,ne(t.group.rows,v=>(o(),C(De,{key:v[e(s).rowKey],row:v},null,8,["row"]))),128))])]))}},Ll={class:"h-full overflow-y-auto"},Rl={__name:"ListGroups",setup(t){const s=Y("list");return(l,n)=>(o(),g("div",Ll,[(o(!0),g(oe,null,ne(e(s).rows,v=>(o(),g("div",{key:v.group},[H(l.$slots,"default",{},()=>[m(ht,{group:v},{default:k(()=>[l.$slots["group-header"]?H(l.$slots,"group-header",me({key:0,ref_for:!0},{group:v})):z("",!0)]),_:2},1032,["group"]),m(wt,{group:v},null,8,["group"])])]))),128))]))}},Al={key:0,class:"absolute inset-x-0 bottom-6 mx-auto w-max text-base"},jl={class:"flex flex-1 justify-between border-r border-outline-gray-2 text-ink-gray-9"},Dl={class:"flex items-center space-x-3"},ql={class:"mr-3"},Fl={class:"flex items-center space-x-1"},yt=Object.assign({inheritAttrs:!1},{__name:"ListSelectBanner",setup(t){const s=Y("list");let l=B(()=>s.value.options.selectionText(s.value.selections.size));return(n,v)=>(o(),C(Vt,{"enter-active-class":"duration-300 ease-out","enter-from-class":"transform opacity-0","enter-to-class":"opacity-100","leave-active-class":"duration-300 ease-in","leave-from-class":"opacity-100","leave-to-class":"transform opacity-0"},{default:k(()=>[e(s).selections.size?(o(),g("div",Al,[p("div",{class:ue(["flex min-w-[596px] items-center space-x-3 rounded-lg bg-surface-white px-4 py-2 shadow-2xl",n.$attrs.class])},[H(n.$slots,"default",ve(ye({selections:e(s).selections,allRowsSelected:e(s).allRowsSelected,selectAll:()=>e(s).toggleAllRows(!0),unselectAll:()=>e(s).toggleAllRows(!1)})),()=>[p("div",jl,[p("div",Dl,[m(Oe,{modelValue:!0,disabled:!0,class:"text-ink-gray-9"}),p("div",null,Q(e(l)),1)]),p("div",ql,[H(n.$slots,"actions",ve(ye({selections:e(s).selections,allRowsSelected:e(s).allRowsSelected,selectAll:()=>e(s).toggleAllRows(!0),unselectAll:()=>e(s).toggleAllRows(!1)})))])]),p("div",Fl,[m(e(de),{class:ue(["w- text-ink-gray-7",e(s).allRowsSelected?"cursor-not-allowed":""]),disabled:e(s).allRowsSelected,variant:"ghost",onClick:v[0]||(v[0]=i=>e(s).toggleAllRows(!0))},{default:k(()=>[...v[2]||(v[2]=[lt(" Select all ",-1)])]),_:1},8,["disabled","class"]),m(e(de),{icon:"x",variant:"ghost",onClick:v[1]||(v[1]=i=>e(s).toggleAllRows(!1))})])])],2)])):z("",!0)]),_:3}))}}),Nl={class:"relative flex w-full flex-1 flex-col overflow-x-auto"},Ml=Object.assign({inheritAttrs:!1},{__name:"ListView",props:{columns:{type:Array,default:[]},rows:{type:Array,default:[]},rowKey:{type:String,required:!0},options:{type:Object,default:()=>({getRowRoute:null,onRowClick:null,showTooltip:!0,selectable:!0,resizeColumn:!1,rowHeight:40,emptyState:{title:"No Data",description:"No data available"}})}},emits:["update:selections","update:active-row"],setup(t,{expose:s,emit:l}){const n=t,v=St();let i=Re(new Set),f=le(null);const c=l;je(i,b=>{i.size&&(f.value=null),c("update:selections",b)}),je(f,b=>{c("update:active-row",b)});let _=B(()=>{function b(h){return h===void 0?!0:h}function I(h){return h===void 0?!1:h}return{getRowRoute:n.options.getRowRoute||null,onRowClick:n.options.onRowClick||null,showTooltip:b(n.options.showTooltip),selectionText:n.options.selectionText||(h=>h===1?"1 row selected":`${h} rows selected`),enableActive:I(n.options.enableActive),selectable:b(n.options.selectable),resizeColumn:I(n.options.resizeColumn),rowHeight:n.options.rowHeight||40,emptyState:n.options.emptyState}});const A=B(()=>n.rows.length?x.value?i.size===n.rows.reduce((b,I)=>b+I.rows.length,0):i.size===n.rows.length:!1),d=B(()=>_.value.selectable);let x=B(()=>n.rows.every(b=>b.group&&b.rows&&Array.isArray(b.rows)));function R(b){i.delete(b)||i.add(b)}function w(b){if(!b||A.value){i.clear();return}if(x.value){n.rows.forEach(I=>{I.rows.forEach(h=>i.add(h[n.rowKey]))});return}n.rows.forEach(I=>i.add(I[n.rowKey]))}return ze("list",B(()=>({rowKey:n.rowKey,rows:n.rows,columns:n.columns,options:_.value,selections:i,activeRow:f,allRowsSelected:A.value,slots:v,toggleRow:R,toggleAllRows:w}))),s({selections:i,allRowsSelected:A,toggleRow:R,toggleAllRows:w}),(b,I)=>(o(),g("div",Nl,[p("div",{class:ue(["flex w-max min-w-full flex-col overflow-y-hidden",b.$attrs.class]),style:Te(b.$attrs.style)},[H(b.$slots,"default",ve(ye({showGroupedRows:e(x),selectable:d.value})),()=>[m(pt),n.rows.length?(o(),g(oe,{key:0},[e(x)?(o(),C(Rl,{key:0})):(o(),C(vt,{key:1}))],64)):(o(),C(hl,{key:1})),d.value?(o(),C(yt,{key:2})):z("",!0)])],6)]))}}),Il={class:"flex justify-between gap-2"},zl={class:"flex items-center"},Bl={key:1,class:"mx-3 h-[80%] border-l"},Ol={class:"flex items-center gap-1 text-base text-ink-gray-5"},Tl={__name:"ListFooter",props:{modelValue:{type:Number,default:20},options:{type:Object,default:()=>({rowCount:0,totalCount:0,pageLengthOptions:[20,50,100]})}},emits:["update:modelValue","loadMore"],setup(t,{emit:s}){const l=t,n=s,v=B({get:()=>l.modelValue,set:c=>n("update:modelValue",c)}),i=le(l.options.pageLengthOptions||[20,50,100]),f=B(()=>l.options.rowCount&&l.options.totalCount&&l.options.rowCount<l.options.totalCount);return(c,_)=>{const A=we("Button");return o(),g("div",Il,[H(c.$slots,"default",{},()=>[H(c.$slots,"left",{},()=>[m(Yt,{modelValue:v.value,"onUpdate:modelValue":_[0]||(_[0]=d=>v.value=d),buttons:i.value.map(d=>({label:d,value:d}))},null,8,["modelValue","buttons"])]),H(c.$slots,"right",{},()=>[p("div",zl,[f.value?(o(),C(A,{key:0,label:"Load More",onClick:_[1]||(_[1]=d=>n("loadMore"))})):z("",!0),f.value?(o(),g("div",Bl)):z("",!0),p("div",Ol,[p("div",null,Q(t.options.rowCount||"0"),1),_[2]||(_[2]=p("div",null,"of",-1)),p("div",null,Q(t.options.totalCount||"0"),1)])])])])])}}},El={},Ul={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-arrow-down-a-z"};function Hl(t,s){return o(),g("svg",Ul,[...s[0]||(s[0]=[Ee('<path d="m3 16 4 4 4-4"></path><path d="M7 20V4"></path><path d="M20 8h-5"></path><path d="M15 10V6.5a2.5 2.5 0 0 1 5 0V10"></path><path d="M15 14h5l-5 6h5"></path>',5)])])}const Ze=pe(El,[["render",Hl]]),Wl={},Pl={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Kl(t,s){return o(),g("svg",Pl,[...s[0]||(s[0]=[p("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.07548 1.50005C8.05087 1.49632 8.02566 1.49438 8 1.49438C7.97434 1.49438 7.94914 1.49632 7.92452 1.50005H3C1.89543 1.50005 1 2.39548 1 3.50005V12.5C1 13.6046 1.89543 14.5 3 14.5H7.92511C7.94954 14.5037 7.97455 14.5056 8 14.5056C8.02545 14.5056 8.05046 14.5037 8.07489 14.5H13C14.1046 14.5 15 13.6046 15 12.5V3.50005C15 2.39548 14.1046 1.50005 13 1.50005H8.07548ZM7.5 2.50005H3C2.44772 2.50005 2 2.94776 2 3.50005V12.5C2 13.0523 2.44772 13.5 3 13.5H7.5L7.5 2.50005ZM8.5 13.5L8.5 2.50005H13C13.5523 2.50005 14 2.94776 14 3.50005V12.5C14 13.0523 13.5523 13.5 13 13.5H8.5Z",fill:"currentColor"},null,-1)])])}const Je=pe(Wl,[["render",Kl]]),Gl={},Zl={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-arrow-up-z-a"};function Jl(t,s){return o(),g("svg",Zl,[...s[0]||(s[0]=[Ee('<path d="m3 8 4-4 4 4"></path><path d="M7 4v16"></path><path d="M15 4h5l-5 6h5"></path><path d="M15 20v-3.5a2.5 2.5 0 0 1 5 0V20"></path><path d="M20 18h-5"></path>',5)])])}const Qe=pe(Gl,[["render",Jl]]),Ql={},Yl={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Xl(t,s){return o(),g("svg",Yl,[...s[0]||(s[0]=[p("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13 6.75C12.3096 6.75 11.75 6.19036 11.75 5.5C11.75 4.80964 12.3096 4.25 13 4.25C13.6904 4.25 14.25 4.80964 14.25 5.5C14.25 6.19036 13.6904 6.75 13 6.75ZM3 6.75C2.30964 6.75 1.75 6.19036 1.75 5.5C1.75 4.80964 2.30964 4.25 3 4.25C3.69036 4.25 4.25 4.80964 4.25 5.5C4.25 6.19036 3.69036 6.75 3 6.75ZM6.75 5.5C6.75 6.19036 7.30964 6.75 8 6.75C8.69036 6.75 9.25 6.19036 9.25 5.5C9.25 4.80964 8.69036 4.25 8 4.25C7.30964 4.25 6.75 4.80964 6.75 5.5ZM13 11.75C12.3096 11.75 11.75 11.1904 11.75 10.5C11.75 9.80964 12.3096 9.25 13 9.25C13.6904 9.25 14.25 9.80964 14.25 10.5C14.25 11.1904 13.6904 11.75 13 11.75ZM1.75 10.5C1.75 11.1904 2.30964 11.75 3 11.75C3.69036 11.75 4.25 11.1904 4.25 10.5C4.25 9.80964 3.69036 9.25 3 9.25C2.30964 9.25 1.75 9.80964 1.75 10.5ZM8 11.75C7.30964 11.75 6.75 11.1904 6.75 10.5C6.75 9.80964 7.30964 9.25 8 9.25C8.69036 9.25 9.25 9.80964 9.25 10.5C9.25 11.1904 8.69036 11.75 8 11.75Z",fill:"currentColor"},null,-1)])])}const gt=pe(Ql,[["render",Xl]]),eo={},to={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function lo(t,s){return o(),g("svg",to,[...s[0]||(s[0]=[p("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.5 4.5C2.5 3.39543 3.39543 2.5 4.5 2.5H8.5C8.77614 2.5 9 2.27614 9 2C9 1.72386 8.77614 1.5 8.5 1.5H4.5C2.84315 1.5 1.5 2.84315 1.5 4.5V11.5C1.5 13.1569 2.84315 14.5 4.5 14.5H11.5C13.1569 14.5 14.5 13.1569 14.5 11.5V7.5C14.5 7.22386 14.2761 7 14 7C13.7239 7 13.5 7.22386 13.5 7.5V11.5C13.5 12.6046 12.6046 13.5 11.5 13.5H4.5C3.39543 13.5 2.5 12.6046 2.5 11.5V4.5ZM14.1255 2.58446C14.3207 2.3892 14.3207 2.07261 14.1255 1.87735C13.9302 1.68209 13.6136 1.68209 13.4184 1.87735L6.68616 8.60954C6.4909 8.8048 6.4909 9.12139 6.68616 9.31665C6.88143 9.51191 7.19801 9.51191 7.39327 9.31665L14.1255 2.58446Z",fill:"currentColor"},null,-1)])])}const oo=pe(eo,[["render",lo]]),so={},no={width:"16",height:"16",fill:"none",viewBox:"0 0 16 16"};function ao(t,s){return o(),g("svg",no,[...s[0]||(s[0]=[p("g",{class:"es-line-reload","clip-path":"url(#a)"},[p("path",{fill:"currentColor","fill-rule":"evenodd",d:"M9.743 2.189a6 6 0 0 0-6.558 2.596.5.5 0 0 0 .844.535 5 5 0 0 1 9.12 1.683l-1.187-.686a.5.5 0 0 0-.5.866l2.165 1.25a.5.5 0 0 0 .683-.183l1.25-2.165a.5.5 0 0 0-.866-.5l-.603 1.044a6 6 0 0 0-4.348-4.44ZM3.356 9.024l1.189.687a.5.5 0 0 0 .5-.866L2.88 7.595a.5.5 0 0 0-.683.183L.947 9.943a.5.5 0 1 0 .866.5l.603-1.044a6 6 0 0 0 10.9 1.816.5.5 0 0 0-.844-.536 5 5 0 0 1-9.116-1.655Z",class:"Union","clip-rule":"evenodd"})],-1),p("defs",null,[p("clipPath",{id:"a",class:"a"},[p("path",{fill:"currentColor",d:"M.25 0h16v16h-16z"})])],-1)])])}const io=pe(so,[["render",ao]]),ro={},uo={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function co(t,s){return o(),g("svg",uo,[...s[0]||(s[0]=[p("path",{d:"M2.35619 8.42909C2.35644 9.77009 2.84031 11.066 3.719 12.079C4.5977 13.092 5.81226 13.7542 7.13977 13.9439C8.46729 14.1336 9.8187 13.8382 10.946 13.1119C12.0732 12.3856 12.9008 11.2771 13.2766 9.98982C13.6525 8.70258 13.5515 7.32295 12.9922 6.10414C12.4329 4.88534 11.4528 3.90914 10.2318 3.35469C9.0108 2.80025 7.63079 2.70476 6.34504 3.08576C5.0593 3.46675 3.95409 4.29867 3.23226 5.42883",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),p("path",{d:"M3.21297 2V5.42886H6.64183",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])}const fo=pe(ro,[["render",co]]),po={},mo={width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function vo(t,s){return o(),g("svg",mo,[...s[0]||(s[0]=[Ee('<path d="M1.75 3.75H10.75" stroke="currentColor" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path><path d="M1.75 7.75H7.75" stroke="currentColor" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path><path d="M1.75 11.75H5.75" stroke="currentColor" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path><path d="M14.25 8.25L12.25 6.25L10.25 8.25" stroke="currentColor" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path><path d="M12.25 12.25L12.25 6.25" stroke="currentColor" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path>',5)])])}const xe=pe(po,[["render",vo]]),ho={},wo={width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function yo(t,s){return o(),g("svg",wo,[...s[0]||(s[0]=[p("path",{d:"M2 4.5H14",stroke:"currentColor","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),p("path",{d:"M4 8.5H12",stroke:"currentColor","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),p("path",{d:"M6.5 12.5H9.5",stroke:"currentColor","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])}const go=pe(ho,[["render",yo]]),_o={class:"flex items-center w-fit"},bo={class:"flex h-5 w-5 items-center justify-center rounded-[5px] bg-surface-white pt-px text-xs font-medium text-ink-gray-8 shadow-sm"},ko={class:"my-2 rounded-lg border border-gray-100 bg-white shadow-xl"},xo={class:"min-w-72 p-2 sm:min-w-[400px]"},Co={key:0,class:"flex flex-col gap-2"},$o={class:"-mb-2 flex w-full items-center justify-between"},Vo={class:"text-base text-gray-600"},So={id:"fieldname",class:"w-full"},Lo={id:"operator"},Ro={id:"value",class:"w-full"},Ao={key:1,class:"flex items-center justify-between gap-2"},jo={class:"flex items-center gap-2 flex-1"},Do={class:"w-13 pl-2 text-end text-base text-gray-600"},qo={id:"fieldname",class:"!min-w-[140px]"},Fo={id:"operator"},No={id:"value",class:"!min-w-[140px] flex-1"},Mo={key:1,class:"mb-3 flex h-7 items-center px-3 text-sm text-gray-600"},Io={class:"flex items-center justify-between gap-2"},Ye={__name:"Filter",props:{default_filters:{type:Object,required:!1,default:{}}},setup(t){const{isMobileView:s}=ot(),l=["Check"],n=["Link","Dynamic Link"],v=["Float","Int","Currency","Percent"],i=["Select"],f=["Data","Long Text","Small Text","Text Editor","Text"],c=["Date","Datetime"],_=["Rating"],A=Y("listViewData"),d=Y("listViewActions"),{list:x,filterableFields:R}=A,w=B(()=>{var j,S,T;if(!x)return new Set;let r=((j=x==null?void 0:x.params)==null?void 0:j.filters)||((T=(S=x.data)==null?void 0:S.params)==null?void 0:T.filters);return!r||!R.data?new Set:b(R.data,r)});function b(r,j){let S=[];for(let[T,W]of Object.entries(j)){let L=r.find(J=>J.fieldname===T);(typeof W!="object"||!W)&&(W=["=",W],(L==null?void 0:L.fieldtype)==="Check"&&(W=["equals",W[1]?"Yes":"No"])),typeof W[1]=="number"&&(W[1]=W[1].toString()),L&&S.push({field:L,fieldname:T,operator:qe[W[0]],value:W[1]})}return new Set(S)}function I(r,j){let S=[];return f.includes(r)&&S.push({label:u("Equals"),value:"equals"},{label:u("Not Equals"),value:"not equals"},{label:u("Like"),value:"like"},{label:u("Not Like"),value:"not like"},{label:"In",value:"in"},{label:u("Not In"),value:"not in"},{label:"Is",value:"is"}),j==="_assign"&&(S=[{label:u("Like"),value:"like"},{label:u("Not Like"),value:"not like"},{label:"Is",value:"is"}]),v.includes(r)&&S.push({label:u("Equals"),value:"equals"},{label:u("Not Equals"),value:"not equals"},{label:u("Like"),value:"like"},{label:u("Not Like"),value:"not like"},{label:"In",value:"in"},{label:u("Not In"),value:"not in"},{label:"Is",value:"is"},{label:"<",value:"<"},{label:">",value:">"},{label:"<=",value:"<="},{label:">=",value:">="}),i.includes(r)&&S.push({label:u("Equals"),value:"equals"},{label:u("Not Equals"),value:"not equals"},{label:"In",value:"in"},{label:u("Not In"),value:"not in"},{label:"Is",value:"is"}),n.includes(r)&&S.push({label:u("Equals"),value:"equals"},{label:u("Not Equals"),value:"not equals"},{label:u("Like"),value:"like"},{label:u("Not Like"),value:"not like"},{label:"In",value:"in"},{label:u("Not In"),value:"not in"},{label:"Is",value:"is"}),l.includes(r)&&S.push({label:u("Equals"),value:"equals"}),["Duration"].includes(r)&&S.push({label:u("Like"),value:"like"},{label:u("Not Like"),value:"not like"},{label:"In",value:"in"},{label:u("Not In"),value:"not in"},{label:"Is",value:"is"}),c.includes(r)&&S.push({label:u("Equals"),value:"equals"},{label:u("Not Equals"),value:"not equals"},{label:"Is",value:"is"},{label:">",value:">"},{label:"<",value:"<"},{label:">=",value:">="},{label:"<=",value:"<="},{label:u("Between"),value:"between"},{label:u("Timespan"),value:"timespan"}),_.includes(r)&&S.push({label:u("Equals"),value:"equals"},{label:u("Not Equals"),value:"not equals"},{label:"Is",value:"is"},{label:">",value:">"},{label:"<",value:"<"},{label:">=",value:">="},{label:"<=",value:"<="}),S}function h(r){const{field:j,operator:S}=r,{fieldtype:T,options:W}=j;if(S=="is")return ee(re,{type:"select",options:[{label:u("Set"),value:"set"},{label:u("Not Set"),value:"not set"}]});if(S=="timespan")return ee(re,{type:"select",options:Fe});if(["like","not like","in","not in"].includes(S))return ee(re,{type:"text"});if(i.includes(T)||l.includes(T)){const L=T=="Check"?["Yes","No"]:$(W);return ee(re,{type:"select",options:L.map(J=>({label:J,value:J}))})}else return n.includes(T)?T=="Dynamic Link"?ee(re,{type:"text"}):ee(ut,{class:"form-control",doctype:W,value:r.value}):v.includes(T)?ee(re,{type:"number"}):c.includes(T)&&S=="between"?ee(nl,{value:r.value,iconLeft:""}):c.includes(T)?ee(T=="Date"?it:rt,{value:r.value,iconLeft:""}):_.includes(T)?ee(ct,{rating:r.value||0,static:!1,class:"truncate","onUpdate:modelValue":L=>te(L,r)}):ee(re,{type:"text"})}function F(r){return i.includes(r.fieldtype)?$(r.options)[0]:l.includes(r.fieldtype)?"Yes":c.includes(r.fieldtype)?null:_.includes(r.fieldtype)?0:""}function q(r,j=null){return j==="_assign"?"like":i.includes(r)||l.includes(r)||v.includes(r)?"equals":c.includes(r)?"between":n.includes(r)||_.includes(r)?"equals":"like"}function $(r){return r.split(`
`)}function y(r){r&&(w.value.add({field:{label:r.label,fieldname:r.value,fieldtype:r.fieldtype,options:r.options},fieldname:r.value,operator:q(r.fieldtype,r.fieldname),value:F(r)}),X())}function D(r,j){w.value.delete(Array.from(w.value)[j]),w.value.add({fieldname:r.value,operator:q(r.fieldtype),value:F(r),field:{label:r.label,fieldname:r.value,fieldtype:r.fieldtype,options:r.options}}),X()}function N(r){w.value.delete(Array.from(w.value)[r]),X()}function P(r){w.value.clear(),X(),r&&r()}function te(r,j){r=r.target?r.target.value:r,j.operator==="between"?j.value=[r.split(",")[0],r.split(",")[1]]:j.value=r,X()}function G(r,j){let S=r.target._value,T=r.target.value;j.operator=r.target.value,K(S,T)||(j.value=F(j.field)),(T==="is"||T==="is not")&&(j.value="set"),X()}function K(r,j){let S=["equals","not equals","in","not in",">","<",">=","<="];return!!(S.includes(r)&&S.includes(j))}function X(){const r=[];w.value.forEach(j=>{r.push({fieldname:j.fieldname,operator:j.operator,value:j.value,toBoolean:j.field.fieldtype==="Check"})}),d.applyFilters(ge(r))}function ge(r){return r.map(_e).reduce((j,S)=>(["equals","="].includes(S.operator)?S.toBoolean?j[S.fieldname]=S.value==="Yes"?!0:S.value==="No"?!1:S.value:j[S.fieldname]=S.value:j[S.fieldname]=[$e[S.operator.toLowerCase()],S.value],j),{})}function _e(r){return r.operator.includes("like")&&!r.value.includes("%")&&(r.value=`%${r.value}%`),r}const $e={is:"is","is not":"is not",in:"in","not in":"not in",equals:"=","not equals":"!=",yes:!0,no:!1,like:"LIKE","not like":"NOT LIKE",">":">","<":"<",">=":">=","<=":"<=",between:"between",timespan:"timespan"},qe={is:"is","=":"equals","!=":"not equals",equals:"equals","is not":"is not",true:"yes",false:"no",LIKE:"like","NOT LIKE":"not like",in:"in","not in":"not in",">":">","<":"<",">=":">=","<=":"<=",between:"between",timespan:"timespan"},Fe=[{label:u("Last Week"),value:"last week"},{label:u("Last Month"),value:"last month"},{label:u("Last Quarter"),value:"last quarter"},{label:u("Last 6 Months"),value:"last 6 months"},{label:u("Last Year"),value:"last year"},{label:u("Yesterday"),value:"yesterday"},{label:u("Today"),value:"today"},{label:u("Tomorrow"),value:"tomorrow"},{label:u("This Week"),value:"this week"},{label:u("This Month"),value:"this month"},{label:u("This Quarter"),value:"this quarter"},{label:u("This Year"),value:"this year"},{label:u("Next Week"),value:"next week"},{label:u("Next Month"),value:"next month"},{label:u("Next Quarter"),value:"next quarter"},{label:u("Next 6 Months"),value:"next 6 months"},{label:u("Next Year"),value:"next year"}];return(r,j)=>(o(),C(e(Lt),{placement:"bottom-end"},{target:k(({togglePopover:S,close:T})=>{var W,L,J;return[p("div",_o,[m(e(de),{label:e(u)("Filter"),class:ue((W=w.value)!=null&&W.size?"rounded-r-none":""),onClick:S},Ce({prefix:k(()=>[m(go,{class:"h-4"})]),_:2},[(L=w.value)!=null&&L.size?{name:"suffix",fn:k(()=>[p("span",bo,Q(w.value.size),1)]),key:"0"}:void 0]),1032,["label","class","onClick"]),(J=w.value)!=null&&J.size?(o(),C(e(tt),{key:0,text:"Clear all Filter"},{default:k(()=>[p("div",null,[m(e(de),{class:"rounded-l-none border-l",icon:"x",onClick:he(O=>P(T),["stop"])},null,8,["onClick"])])]),_:2},1024)):z("",!0)])]}),body:k(({close:S})=>{var T,W;return[p("div",ko,[p("div",xo,[(T=w.value)!=null&&T.size?(o(!0),g(oe,{key:0},ne(w.value,(L,J)=>(o(),g("div",{key:J,id:"filter-list",class:"mb-4 sm:mb-3"},[e(s)?(o(),g("div",Co,[p("div",$o,[p("div",Vo,Q(J==0?"Where":"And"),1),m(e(de),{class:"flex",variant:"ghost",icon:"x",onClick:O=>N(J)},null,8,["onClick"])]),p("div",So,[m(e(Me),{modelValue:L.field.fieldname,"onUpdate:modelValue":[O=>L.field.fieldname=O,O=>D(O,J)],options:e(R).data,placeholder:e(u)("First Name")},null,8,["modelValue","onUpdate:modelValue","options","placeholder"])]),p("div",Lo,[m(e(re),{type:"select",modelValue:L.operator,"onUpdate:modelValue":O=>L.operator=O,onChange:O=>G(O,L),options:I(L.field.fieldtype,L.field.fieldname),placeholder:e(u)("Equals")},null,8,["modelValue","onUpdate:modelValue","onChange","options","placeholder"])]),p("div",Ro,[(o(),C(fe(h(L)),{modelValue:L.value,"onUpdate:modelValue":O=>L.value=O,onChange:O=>te(O,L),placeholder:e(u)("John Doe")},null,40,["modelValue","onUpdate:modelValue","onChange","placeholder"]))])])):(o(),g("div",Ao,[p("div",jo,[p("div",Do,Q(J==0?"Where":"And"),1),p("div",qo,[m(e(Me),{modelValue:L.field.fieldname,"onUpdate:modelValue":[O=>L.field.fieldname=O,O=>D(O,J)],options:e(R).data,placeholder:e(u)("First Name")},null,8,["modelValue","onUpdate:modelValue","options","placeholder"])]),p("div",Fo,[m(e(re),{type:"select",modelValue:L.operator,"onUpdate:modelValue":O=>L.operator=O,onChange:O=>G(O,L),options:I(L.field.fieldtype,L.field.fieldname),placeholder:e(u)("Equals")},null,8,["modelValue","onUpdate:modelValue","onChange","options","placeholder"])]),p("div",No,[(o(),C(fe(h(L)),{modelValue:L.value,"onUpdate:modelValue":O=>L.value=O,onChange:O=>te(O,L),placeholder:e(u)("John Doe")},null,40,["modelValue","onUpdate:modelValue","onChange","placeholder"]))])]),m(e(de),{class:"flex",variant:"ghost",icon:"x",onClick:O=>N(J)},null,8,["onClick"])]))]))),128)):(o(),g("div",Mo,Q("Empty - Choose a field to filter by"))),p("div",Io,[m(e(Me),{options:e(R).data,"onUpdate:modelValue":j[0]||(j[0]=L=>y(L)),placeholder:e(u)("First name")},{target:k(({togglePopover:L})=>[m(e(de),{class:"!text-gray-600",variant:"ghost",onClick:J=>L(),label:e(u)("Add Filter")},{prefix:k(()=>[m(e(st),{name:"plus",class:"h-4"})]),_:1},8,["onClick","label"])]),_:1},8,["options","placeholder"]),(W=w.value)!=null&&W.size?(o(),C(e(de),{key:0,class:"!text-gray-600",variant:"ghost",label:e(u)("Clear all Filter"),onClick:L=>P(S)},null,8,["label","onClick"])):z("",!0)])])])]}),_:1}))}};function zo(t){return Rt()?(At(t),!0):!1}const Bo=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;function Oo(t){return t||jt()}function To(t,s=!0,l){Oo(l)?nt(t,l):s?t():Ue(t)}const Eo=Bo?window.document:void 0;function Uo(t){var s;const l=Be(t);return(s=l==null?void 0:l.$el)!=null?s:l}function Ho(t,s,l={}){let n;const{document:v=Eo,...i}=l,f={onUpdate:d=>{Ko(s,d.oldIndex,d.newIndex,d)}},c=()=>{const d=typeof t=="string"?v==null?void 0:v.querySelector(t):Uo(t);!d||n!==void 0||(n=new Xt(d,{...f,...i}))},_=()=>{n==null||n.destroy(),n=void 0},A=(d,x)=>{if(x!==void 0)n==null||n.option(d,x);else return n==null?void 0:n.option(d)};return To(c),zo(_),{stop:_,start:c,option:A}}function Wo(t,s,l){const n=t.children[l];t.insertBefore(s,n)}function Po(t){t.parentNode&&t.parentNode.removeChild(t)}function Ko(t,s,l,n=null){n!=null&&(Po(n.item),Wo(n.from,n.item,s));const v=Dt(t),i=v?[...Be(t)]:Be(t);if(l>=0&&l<i.length){const f=i.splice(s,1)[0];Ue(()=>{i.splice(l,0,f),v&&(t.value=i)})}}const Go={class:"flex h-5 w-5 items-center justify-center rounded-[5px] bg-surface-white pt-px text-xs font-medium text-ink-gray-8 shadow-sm"},Zo={key:1,class:"flex items-center justify-center"},Jo={class:"my-2 rounded-lg border border-gray-100 bg-white shadow-xl"},Qo={class:"min-w-60 p-2"},Yo={key:0,id:"sort-list",class:"mb-3 flex flex-col gap-2"},Xo={class:"handle flex h-7 w-7 items-center justify-center"},es={class:"flex"},ts={key:1,class:"mb-3 flex h-7 items-center px-3 text-sm text-gray-600"},ls={class:"flex items-center justify-between gap-2"},Xe={__name:"SortBy",props:{hideLabel:{type:Boolean,default:!1}},emits:["update"],setup(t,{emit:s}){const l=Y("listViewData"),n=Y("listViewActions"),{list:v,sortableFields:i}=l,f=B({get:()=>{var q;if(!v)return new Set;let F=(q=v.params)==null?void 0:q.order_by;return!F||!i.data?new Set:(F=F.split(", ").map($=>{const[y,D]=$.split(" ");return{fieldname:y,direction:D}}),new Set(F))},set:F=>{v.params.order_by=I(F)}}),c=B(()=>{if(!i.data)return[];if(!f.value.size)return i.data;const F=[...f.value].map(q=>q.fieldname);return h(),i.data.filter(q=>!F.includes(q.value))}),_=Ho("#sort-list",f,{handle:".handle",animation:200,onEnd:()=>b()});function A(){var $,y;if(!f.value.size)return"Sort";let F=Array.from(f.value);return((y=($=i.data)==null?void 0:$.find(D=>D.value===F[0].fieldname))==null?void 0:y.label)||sort.fieldname}function d(F){f.value.add({fieldname:F.value,direction:"asc"}),h(),b()}function x(F,q){let $=Array.from(f.value)[q];f.value.delete($),f.value.add({fieldname:F.value,direction:$.direction}),b()}function R(F){f.value.delete(Array.from(f.value)[F]),b()}function w(F){f.value.clear(),b(),F()}function b(){n.applySort(I(f.value))}function I(F){let q="";return F.forEach($=>{q+=`${$.fieldname} ${$.direction}, `}),q=q.slice(0,-2),q}function h(){_.stop(),_.start()}return(F,q)=>{var D;const $=we("Button"),y=we("FeatherIcon");return(D=f.value)!=null&&D.size?(o(),C(e(al),{key:1},{target:k(({open:N})=>{var P,te,G;return[f.value.size>1?(o(),C($,{key:0,label:e(u)("Sort")},Ce({default:k(()=>[t.hideLabel?(o(),C(e(xe),{key:0,class:"h-4"})):z("",!0)]),_:2},[t.hideLabel?void 0:{name:"prefix",fn:k(()=>[m(e(xe),{class:"h-4"})]),key:"0"},(P=f.value)!=null&&P.size?{name:"suffix",fn:k(()=>[p("div",Go,Q(f.value.size),1)]),key:"1"}:void 0]),1032,["label"])):(o(),g("div",Zo,[f.value.size?(o(),C($,{key:0,class:"rounded-r-none border-r",onClick:q[1]||(q[1]=he(()=>{Array.from(f.value)[0].direction=Array.from(f.value)[0].direction=="asc"?"desc":"asc",b()},["stop"]))},{default:k(()=>[Array.from(f.value)[0].direction=="asc"?(o(),C(e(Ze),{key:0,class:"h-4"})):(o(),C(e(Qe),{key:1,class:"h-4"}))]),_:1})):z("",!0),m($,{label:A(),class:ue(f.value.size?"rounded-l-none":"")},Ce({_:2},[!t.hideLabel&&!((te=f.value)!=null&&te.size)?{name:"prefix",fn:k(()=>[m(e(xe),{class:"h-4"})]),key:"0"}:void 0,(G=f.value)!=null&&G.size?{name:"suffix",fn:k(()=>[m(y,{name:N?"chevron-up":"chevron-down",class:"h-4 text-gray-600"},null,8,["name"])]),key:"1"}:void 0]),1032,["label","class"])]))]}),body:k(({close:N})=>{var P,te;return[p("div",Jo,[p("div",Qo,[(P=f.value)!=null&&P.size?(o(),g("div",Yo,[(o(!0),g(oe,null,ne(f.value,(G,K)=>(o(),g("div",{key:G.fieldname,class:"flex items-center gap-1"},[p("div",Xo,[m(e(gt),{class:"h-4 w-4 cursor-grab text-gray-600"})]),p("div",es,[m($,{size:"md",class:"rounded-r-none border-r",onClick:()=>{G.direction=G.direction=="asc"?"desc":"asc",b()}},{default:k(()=>[G.direction=="asc"?(o(),C(e(Ze),{key:0,class:"h-4"})):(o(),C(e(Qe),{key:1,class:"h-4"}))]),_:2},1032,["onClick"]),m(Ae,{class:"!w-32",value:G.fieldname,options:e(i).data,onChange:X=>x(X,K),placeholder:e(u)("First Name")},{target:k(({togglePopover:X,selectedValue:ge,displayValue:_e})=>[m($,{class:"flex w-full items-center justify-between rounded-l-none !text-gray-600 text-xs",size:"md",onClick:$e=>X()},{suffix:k(()=>[m(y,{name:"chevron-down",class:"h-4 text-gray-600"})]),default:k(()=>[lt(Q(_e(ge))+" ",1)]),_:2},1032,["onClick"])]),_:1},8,["value","options","onChange","placeholder"])]),m($,{variant:"ghost",icon:"x",onClick:X=>R(K)},null,8,["onClick"])]))),128))])):(o(),g("div",ts,Q("Empty - Choose a field to sort by"))),p("div",ls,[m(Ae,{options:c.value,value:"",placeholder:e(u)("First Name"),onChange:q[2]||(q[2]=G=>d(G))},{target:k(({togglePopover:G})=>[m($,{class:"!text-gray-600",variant:"ghost",onClick:K=>G(),label:e(u)("Add Sort")},{prefix:k(()=>[m(y,{name:"plus",class:"h-4"})]),_:1},8,["onClick","label"])]),_:1},8,["options","placeholder"]),(te=f.value)!=null&&te.size?(o(),C($,{key:0,class:"!text-gray-600",variant:"ghost",label:e(u)("Clear Sort"),onClick:G=>w(N)},null,8,["label","onClick"])):z("",!0)])])])]}),_:1})):(o(),C(Ae,{key:0,options:c.value,value:"",placeholder:e(u)("First Name"),onChange:q[0]||(q[0]=N=>d(N))},{target:k(({togglePopover:N})=>{var P;return[m($,{label:e(u)("Sort"),onClick:te=>N()},Ce({default:k(()=>[t.hideLabel?(o(),C(e(xe),{key:0,class:"h-4"})):z("",!0)]),_:2},[!t.hideLabel&&!((P=f.value)!=null&&P.size)?{name:"prefix",fn:k(()=>[m(e(xe),{class:"h-4"})]),key:"0"}:void 0]),1032,["label","onClick"])]}),_:1},8,["options","placeholder"]))}}},os={__name:"QuickFilterField",props:{filter:{type:Object,required:!0},value:{type:[String,Boolean],required:!0}},emits:["applyQuickFilter"],setup(t,{emit:s}){const l=t,n=s,v=Ft((f,c)=>{n("applyQuickFilter",f,c)},500);function i(f,c){n("applyQuickFilter",f,c)}return(f,c)=>t.filter.type=="Check"?(o(),C(e(re),{key:0,label:t.filter.label,type:"checkbox",checked:l.value,onChange:c[0]||(c[0]=he(_=>i(t.filter,_.target.checked),["stop"])),class:"w-44"},null,8,["label","checked"])):t.filter.type==="Select"?(o(),C(e(re),{key:1,class:"form-control cursor-pointer [&_select]:cursor-pointer w-44",type:"select","model-value":l.value,options:t.filter.options,placeholder:t.filter.label,onChange:c[1]||(c[1]=he(_=>i(t.filter,_.target.value),["stop"]))},null,8,["model-value","options","placeholder"])):t.filter.type==="Link"?(o(),C(e(ut),{key:2,value:l.value,doctype:t.filter.options,placeholder:t.filter.label,onChange:c[2]||(c[2]=_=>i(t.filter,_)),class:"w-44"},null,8,["value","doctype","placeholder"])):["Date","Datetime"].includes(t.filter.type)?(o(),C(fe(t.filter.type==="Date"?e(it):e(rt)),{key:3,class:"border-none w-44",value:l.value,onChange:c[3]||(c[3]=_=>i(t.filter,_)),placeholder:t.filter.label},null,40,["value","placeholder"])):(o(),C(e(qt),{key:4,value:l.value,type:"text",placeholder:t.filter.label,onInput:c[4]||(c[4]=he(_=>e(v)(t.filter,_.target.value),["stop"]))},null,8,["value","placeholder"]))}},ss={key:0},ns={__name:"QuickFilters",setup(t){const s=Y("listViewData"),l=Y("listViewActions"),{list:n,quickFilters:v}=s,i=["Check","Select","Link","Date","Datetime"];function f(A,d){var w;let x={...(w=n.params)==null?void 0:w.filters},R=A.name;d?i.includes(A.type)?x[R]=d:x[R]=["LIKE",`%${d}%`]:delete x[R],l.applyFilters(x)}function c(A){return A.type==="Check"?!1:""}function _(A,d){if(!d||!(A&&A.name))return c(A);const x=d[A.name];if(x===void 0)return c(A);if(i.includes(A.type))return x;if(!Array.isArray(x)||x.length!==2||x[0].toLowerCase()!=="like")return c(A);let R=x[1];return R.startsWith("%")&&(R=R.substring(1)),R.endsWith("%")&&(R=R.substring(0,R.length-1)),R}return(A,d)=>e(v).loading?z("",!0):(o(),g("div",ss,[m(e(cl),{class:"flex flex-1 items-center -ml-1 flex-wrap gap-2",orientation:"horizontal"},{default:k(()=>[(o(!0),g(oe,null,ne(e(v).data,x=>{var R;return o(),g("div",{key:x.name,class:"min-w-36"},[m(os,{filter:x,value:_(x,(R=e(n).params)==null?void 0:R.filters),onApplyQuickFilter:d[0]||(d[0]=(w,b)=>f(w,b))},null,8,["filter","value"])])}),128))]),_:1})]))}},et={__name:"Reload",props:{loading:{type:Boolean,default:!1}},setup(t){return(s,l)=>{const n=io,v=we("Button");return o(),C(v,{label:e(u)("Refresh"),loading:t.loading},{icon:k(()=>[m(n,{class:"h-4 w-4"})]),_:1},8,["label","loading"])}}},as={__name:"NestedPopover",props:{placement:{type:String,default:"bottom-start"}},setup(t){const s=t,l=le(null),n=le(null);let v=le(null);function i(){v.value?v.value.update():v.value=zt(l.value.el,n.value.el,{placement:s.placement})}function f(){Ue(()=>i())}return Nt(()=>{var c;(c=v.value)==null||c.destroy()}),(c,_)=>(o(),C(e(ul),null,{default:k(({open:A})=>[m(e(il),{ref_key:"reference",ref:l,as:"div",onClick:f,onFocusin:f,onKeydown:f},{default:k(({open:d})=>[H(c.$slots,"target",{open:d})]),_:3},512),Mt(p("div",null,[m(e(rl),{ref_key:"popover",ref:n,static:"",class:"z-[100]"},{default:k(({open:d,close:x})=>[H(c.$slots,"body",{open:d,close:x})]),_:3},512)],512),[[It,A]])]),_:3}))}},is={class:"my-2 p-1.5 min-w-40 rounded-lg bg-surface-modal shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none"},rs={key:0},us={class:"flex cursor-grab items-center justify-between gap-6 rounded px-2 py-1.5 text-base text-ink-gray-8 hover:bg-surface-gray-2"},cs={class:"flex items-center gap-2"},ds={class:"flex cursor-pointer items-center gap-1"},fs={class:"mt-1.5 flex flex-col gap-1 border-t border-outline-gray-modals pt-1.5"},ps={key:1},ms={class:"flex flex-col items-center justify-between gap-2 rounded px-2 py-1.5 text-base text-ink-gray-8"},vs={class:"flex flex-col items-center gap-3"},hs={class:"flex w-full gap-2 border-t pt-2"},ws={__name:"ColumnSettings",props:{hideLabel:{type:Boolean,default:!1}},emits:["update"],setup(t,{emit:s}){const l=le(!1),n=le({columns:[],rows:[],isDefault:!1}),v=Y("listViewData"),{list:i}=v,f=Y("listViewActions"),c=le(!1),_=le({old:{},label:"",key:"",width:"10rem"}),A=B({get:()=>{var y;return(y=i.data)==null?void 0:y.is_default},set:y=>{i.data.is_default=y}}),d=B({get:()=>{var y;return(y=i.data)==null?void 0:y.columns},set:y=>{i.data.columns=y}}),x=B({get:()=>{var y;return(y=i.data)==null?void 0:y.rows},set:y=>{i.data.rows=y}}),R=B(()=>{var D;let y=(D=i.data)==null?void 0:D.fields;return y?d.value===""?y:y.filter(N=>!d.value.find(P=>P.key===N.value)):[]});function w(y){let D=["Float","Int","Percent","Currency"].includes(y.type)?"right":"left",N={label:y.label,type:y.type,key:y.value,width:"10rem",align:D};d.value.push(N),x.value.push(y.value),$(!0)}function b(y){d.value.length!==1&&(d.value=d.value.filter(D=>D.key!==y.key),y.key!=="name"&&(x.value=x.value.filter(D=>D!==y.key)),$())}function I(y){c.value=!0,_.value=y,_.value.old={...y}}function h(y){c.value=!1;let D=d.value.findIndex(N=>N.key===y.key);d.value[D].label=y.label,d.value[D].width=y.width,d.value[D].old&&delete d.value[D].old,$()}function F(){c.value=!1,_.value.label=_.value.old.label,_.value.width=_.value.old.width,delete _.value.old}function q(y){$(!0,!0,!0),y()}function $(y=!1,D=!1,N=!1){A.value=D,l.value=!0;let P={columns:N?n.value.columns:d.value,rows:N?n.value.rows:x.value,isDefault:N?n.value.isDefault:D,reload:y,reset:N};f.updateColumns(P),l.value=!N}return Bt(()=>i.data,y=>{y&&(n.value.columns=JSON.parse(JSON.stringify(y.columns)),n.value.rows=JSON.parse(JSON.stringify(y.rows)),n.value.isDefault=y.is_default)}),(y,D)=>{const N=we("Button"),P=we("FeatherIcon"),te=we("FormControl");return o(),C(as,null,{target:k(()=>[m(N,{label:e(u)("Columns")},Ce({default:k(()=>[t.hideLabel?(o(),C(e(Je),{key:0,class:"h-4"})):z("",!0)]),_:2},[t.hideLabel?void 0:{name:"prefix",fn:k(()=>[m(e(Je),{class:"h-4"})]),key:"0"}]),1032,["label"])]),body:k(({close:G})=>[p("div",is,[c.value?(o(),g("div",ps,[p("div",ms,[p("div",vs,[m(te,{type:"text",size:"md",label:e(u)("Label"),modelValue:_.value.label,"onUpdate:modelValue":D[1]||(D[1]=K=>_.value.label=K),class:"sm:w-full w-52",placeholder:e(u)("First Name")},null,8,["label","modelValue","placeholder"]),m(te,{type:"text",size:"md",label:e(u)("Width"),class:"sm:w-full w-52",modelValue:_.value.width,"onUpdate:modelValue":D[2]||(D[2]=K=>_.value.width=K),placeholder:e(u)("10rem"),description:e(u)("Width can be in number, pixel or rem (eg. 3, 30px, 10rem)"),debounce:500},null,8,["label","modelValue","placeholder","description"])]),p("div",hs,[m(N,{variant:"subtle",label:e(u)("Cancel"),class:"w-full flex-1",onClick:F},null,8,["label"]),m(N,{variant:"solid",label:e(u)("Update"),class:"w-full flex-1",onClick:D[3]||(D[3]=K=>h(_.value))},null,8,["label"])])])])):(o(),g("div",rs,[m(e(el),{list:d.value,onEnd:$,delay:e(Ot)()?200:0,"item-key":"key",class:"list-group"},{item:k(({element:K})=>[p("div",us,[p("div",cs,[m(e(gt),{class:"h-3.5"}),p("div",null,Q(K.label),1)]),p("div",ds,[m(N,{variant:"ghost",class:"!h-5 w-5 !p-1",onClick:X=>I(K)},{default:k(()=>[m(e(oo),{class:"h-3.5"})]),_:1},8,["onClick"]),m(N,{variant:"ghost",class:"!h-5 w-5 !p-1",onClick:X=>b(K)},{default:k(()=>[m(P,{name:"x",class:"h-3.5"})]),_:1},8,["onClick"])])])]),_:1},8,["list","delay"]),p("div",fs,[m(Ae,{value:"",options:R.value,onChange:D[0]||(D[0]=K=>w(K))},{target:k(({togglePopover:K})=>[m(N,{class:"w-full !justify-start !text-ink-gray-5",variant:"ghost",onClick:X=>K(),label:e(u)("Add Column")},{prefix:k(()=>[m(P,{name:"plus",class:"h-4"})]),_:1},8,["onClick","label"])]),_:1},8,["options"]),A.value?z("",!0):(o(),C(N,{key:0,class:"w-full !justify-start !text-ink-gray-5",variant:"ghost",onClick:K=>q(G),label:e(u)("Reset to Default")},{prefix:k(()=>[m(e(fo),{class:"h-4"})]),_:1},8,["onClick","label"]))])]))])]),_:1})}}},ys={key:0,class:"mx-3 h-full overflow-y-auto sm:mx-5"},gs={class:"my-2 flex items-center gap-2 text-base font-medium text-ink-gray-8 justify-between w-full mr-1"},_s={class:"flex items-center gap-2 w-full"},bs={key:1,class:"flex items-end gap-1 w-full"},ks={class:"text-xs text-ink-gray-5"},xs={__name:"ListRows",props:{rows:{type:Array,required:!0},groupByActions:{type:Array,default:()=>[]}},setup(t){const s=t,l=le(s.rows),n=i=>{let f=s.groupByActions.map(c=>({...c,onClick:()=>c.onClick(i)}));return i.group.label=="General"&&(f=f.filter(c=>c.label==="Add New Article")),f};je(()=>s.rows,i=>l.value=i);let v=B(()=>s.rows.every(i=>i.group&&i.rows&&Array.isArray(i.rows)));return(i,f)=>e(v)?(o(),g("div",ys,[(o(!0),g(oe,null,ne(l.value,c=>(o(),g("div",{key:c.group},[m(e(ht),{group:c},{default:k(()=>[p("div",gs,[p("div",_s,[c.icon?(o(),C(fe(c.icon),{key:0})):z("",!0),c.group.label!=""?(o(),g("div",bs,[p("span",null,Q(c.group.label),1),p("span",ks,Q(c.rows.length+" Article"+(c.rows.length>1?"s":"")),1)])):z("",!0)]),t.groupByActions.length>0?(o(),C(e(at),{key:0,options:n(c)},{default:k(()=>[m(e(de),{variant:"ghost"},{icon:k(()=>[m(e(tl),{class:"h-4 w-4"})]),_:1})]),_:1},8,["options"])):z("",!0)])]),_:2},1032,["group"]),m(e(wt),{group:c,id:"list-rows",class:"!mt-0"},{default:k(()=>[(o(!0),g(oe,null,ne(c.rows,_=>(o(),C(e(De),{key:_.name,row:_,class:"truncate text-base row"},{default:k(({idx:A,column:d,item:x})=>[H(i.$slots,"default",me({ref_for:!0},{idx:A,column:d,item:x,row:_}))]),_:2},1032,["row"]))),128))]),_:2},1032,["group"])]))),128))])):(o(),C(e(vt),{key:1,class:"mx-3 sm:mx-5",id:"list-rows"},{default:k(()=>[(o(!0),g(oe,null,ne(l.value,c=>(o(),C(e(De),{key:c.name,row:c,class:"truncate text-base"},{default:k(({idx:_,column:A,item:d})=>[H(i.$slots,"default",me({ref_for:!0},{idx:_,column:A,item:d,row:c}))]),_:2},1032,["row"]))),128))]),_:3}))}},Cs={key:0,class:"flex items-center justify-between gap-2 px-5 pb-4 pt-3 pl-6"},$s={key:1,class:"flex items-start gap-2 justify-end h-full"},Vs={key:2,class:"flex justify-between items-center w-full"},Ss={class:"flex items-center gap-2"},Ls={key:2,class:"p-20 border-t sm:px-5 px-3 py-2"},Rs={key:3,class:"w-full h-full flex items-center justify-center -mt-48"},Us=Tt({__name:"ListViewBuilder",props:{options:{}},emits:["emptyStateAction","rowClick"],setup(t,{expose:s,emit:l}){const n=t,v=l,i=Et(),f=Ut(),{isManager:c}=Ht(),{$dialog:_}=ll(),{getStatus:A}=fl();le(new Set);const d=Re({doctype:"",hideViewControls:!1,selectable:!1,view:{view_type:"list",group_by_field:"owner",name:i.query.view},groupByActions:[],default_page_length:20,isCustomerPortal:!1,hideColumnSetting:!0,rowRoute:{name:"",prop:""},selectBannerActions:[{label:u("Delete"),icon:"trash-2",onClick:a=>{_({title:u("Delete"),message:`Are you sure you want to delete ${a.size} item(s)?`,actions:[{label:u("Confirm"),variant:"solid",onClick({close:V}){x(V,a)}}]})},condition:()=>!w.value.isCustomerPortal&&c}]});function x(a,V){Wt("bulk_delete"+n.options.doctype),Pt("frappe.desk.reportview.delete_items",{items:JSON.stringify(Array.from(V)),doctype:n.options.doctype}).then(()=>{Kt.success(u("Item(s) deleted successfully")),a(),R()})}function R(){y.reload(),y.unselectAll()}const w=B(()=>({...d,...n.options})),{isMobileView:b}=ot(),I={icon:"",title:u("No Data Found")},h=Re({doctype:w.value.doctype,filters:{},default_filters:w.value.defaultFilters,order_by:"modified desc",page_length:w.value.default_page_length,page_length_count:w.value.default_page_length,view:w.value.view,columns:[],rows:[],show_customer_portal_fields:w.value.isCustomerPortal,is_default:!1}),F=B(()=>{var a;return((a=w.value)==null?void 0:a.emptyState)||I}),q=le(!1),$=Se({url:"helpdesk.api.doc.get_list_data",params:h,transform:a=>(a.columns.forEach(V=>{G(V),K(V)}),a),onSuccess:a=>{$.params=h,P.value=a.columns}}),y={list:$,reload:W,unselectAll:()=>{}};function D(a,V=()=>{}){y.unselectAll=V;const M=w.value.selectBannerActions.map(U=>({...U,onClick:()=>{var Z;return(Z=U.onClick)==null?void 0:Z.call(U,a)}})),E=d.selectBannerActions.filter(U=>!M.some(Z=>Z.label===U.label)).map(U=>({...U,onClick:()=>{var Z;return(Z=U.onClick)==null?void 0:Z.call(U,a)}}));return[...M,...E]}const N=B(()=>{var a,V,M,E;return(a=$.data)!=null&&a.data?$.data.view_type==="group_by"?(M=(V=$.data)==null?void 0:V.group_by_field)!=null&&M.name?te($.data.data,$.data.group_by_field):[]:(E=$.data)==null?void 0:E.data:[]}),P=le([]);function te(a,V){var E;let M=[];return(E=V.options)==null||E.forEach(U=>{let Z=[];U.value?Z=a.filter(ae=>ae[V.name]==U.value):Z=a.filter(ae=>!ae[V.name]);let ce={group:U||" ",collapsed:!1,rows:Z,icon:ee(st,{name:"folder",class:"h-4 w-4 flex-shrink-0 text-ink-gray-6"})};M.push(ce)}),M||a}function G(a){if(!a.hasOwnProperty("key"))return a;const V=/([a-zA-Z0-9_]+)\.([a-zA-Z0-9_]+)/,M=a.key.match(V);a.key=M?M[2]:a.key}function K(a){var M,E;if(!((M=w.value)!=null&&M.columnConfig))return a;const V=w.value.columnConfig;return V.hasOwnProperty(a.key)&&(a.prefix=(E=V[a.key])==null?void 0:E.prefix),a}const X=Se({url:"helpdesk.api.doc.get_filterable_fields",cache:["DocField",w.value.doctype],auto:!w.value.hideViewControls,params:{doctype:w.value.doctype,append_assign:!0,show_customer_portal_fields:h.show_customer_portal_fields},transform:a=>(a=a.map(V=>({label:V.label,value:V.fieldname,...V})),a)}),ge=Se({url:"helpdesk.api.doc.sort_options",auto:!w.value.hideViewControls,params:{doctype:w.value.doctype,show_customer_portal_fields:h.show_customer_portal_fields}}),_e=Se({url:"helpdesk.api.doc.get_quick_filters",auto:!w.value.hideViewControls,params:{doctype:w.value.doctype,show_customer_portal_fields:h.show_customer_portal_fields},transform:a=>{if(!a.length)return a=[{name:"name",label:u("Name"),fieldtype:"Data"}],a}});function $e(a,V,M,E){var Z,ce;const U=w.value.columnConfig;return U&&((Z=U[a.key])!=null&&Z.custom)?(ce=U[a.key])==null?void 0:ce.custom({column:a,row:V,item:M,idx:E}):E===0?ee("span",{class:"truncate text-base text-ink-gray-6",textContent:M}):a.type==="Datetime"?ee("span",{class:"text-p-xs",textContent:Qt(M)}):a.type==="MultipleAvatar"?ee(dl,{avatars:M,hideName:!0,class:"flex items-center truncate flex-1 flex-row-reverse justify-end"}):a.type==="Rating"?ee(ct,{rating:M||0,class:"truncate"}):ee("span",{class:"truncate flex-1",textContent:M})}function qe(a,V,M,E){var Z,ce;if(["Data","Datetime","Rating","Int","Float"].includes(V.type)){if(((Z=w.value.rowRoute)==null?void 0:Z.name)!=="")return;v("rowClick",M.name);return}if(a.stopPropagation(),a.preventDefault(),V.label=="Status"&&w.value.doctype==="HD Ticket"&&(E=(ce=A(E))==null?void 0:ce.label_agent),V.type==="MultipleAvatar"){if(E.length>1){let ae=a.target;ae=ae.closest(".user-avatar"),ae&&(E=ae.getAttribute("data-name"))}else E=E[0].name;j({...h.filters,[V.key]:["LIKE",E]});return}j({...h.filters,[V.key]:E})}const Fe=B(()=>!w.value.hideViewControls&&X.data&&ge.data&&_e.data),r=Re({list:$,filterableFields:X,quickFilters:_e,sortableFields:ge});ze("listViewData",r),ze("listViewActions",{applyFilters:j,applySort:S,updateColumns:T,reload:W});function j(a){q.value=!0,h.filters={...a},$.submit({...h}),h.is_default&&(J(),q.value=!1)}function S(a){q.value=!0,h.order_by=a,$.submit({...h,order_by:a})}function T(a){q.value=!0;const{columns:V,isDefault:M,rows:E}=a;V==null||V.forEach(U=>{G(U),K(U)}),P.value=h.columns=M?"":V,h.rows=M?"":E,$.reload({...h})}function W(a=!1){a&&(h.filters=w.value.defaultFilters||{},h.order_by="modified desc",h.page_length=w.value.default_page_length,h.page_length_count=w.value.default_page_length,h.columns=[],h.rows=[],h.is_default=!0),$.reload({...h})}function L(a,V=!1){if(h.page_length_count=a,V)h.page_length+=a;else{if(a===h.page_length&&a===h.page_length_count)return;h.page_length=a,h.page_length_count=a}$.reload()}function J(){const a={filters:JSON.stringify(h.filters),columns:JSON.stringify(h.columns),rows:JSON.stringify(h.rows),order_by:h.order_by,name:i.query.view||"default",dt:w.value.doctype,route_name:i.name,is_customer_portal:w.value.isCustomerPortal};_t(a,()=>{q.value=!1})}const{findView:O,updateView:_t,defaultView:Ne}=ol(w.value.doctype),bt=B(()=>{let a=O(i.query.view).value;return!!(!a||!a.public||a.public&&c)});function We(){Ve(),q.value=!1}function Ve(){let a=Pe();if(!a){f.push({name:i.name}),W(!0);return}h.filters=a.filters,h.order_by=a.order_by||"modified desc",h.columns=a.columns,h.rows=a.rows,$.submit({...h})}function Pe(){let a;return i.query.view?(a=O(i.query.view).value,h.is_default=!1):Ne.value&&(a=Ne.value,h.is_default=!0),a}je(()=>i.query.view,a=>{h.view.name=a,Ve(),a||(Le.value.label="List",Le.value.icon="lucide:align-justify")});const Ke=Gt(`list_position+${n.options.doctype}`,0);function kt(a){Ke.value=a.target.scrollTop}function xt(){setTimeout(()=>{const a=document.querySelector(".list-rows");a&&(a.scrollTop=Ke.value)},200)}return nt(async()=>{var a,V;if(xt(),((a=Ie.data)==null?void 0:a.length)>0&&((V=Ie.filters)==null?void 0:V.dt)===w.value.doctype||await Ie.list.promise,Ve(),i.query.view||Ne.value){if(i.query.view){const M=Pe();if(!M)return;Le.value.label=M.label||"List",Le.value.icon=Zt(M.icon)}return}}),s(y),(a,V)=>{var E,U,Z,ce,ae,Ge;const M=we("Button");return o(),g(oe,null,[Fe.value?(o(),g("div",Cs,[e(b)?z("",!0):(o(),C(e(ns),{key:0,class:"flex-1"})),e(b)?(o(),g("div",Vs,[m(e(Ye),{default_filters:h.filters},null,8,["default_filters"]),p("div",Ss,[m(e(et),{onClick:We,loading:e($).loading},null,8,["loading"]),m(e(Xe),{"hide-label":e(b)},null,8,["hide-label"])])])):(o(),g("div",$s,[q.value&&bt.value?(o(),C(M,{key:0,label:e(u)("Save Changes"),onClick:J},null,8,["label"])):z("",!0),m(e(et),{onClick:We,loading:e($).loading},null,8,["loading"]),m(e(Ye),{default_filters:h.filters},null,8,["default_filters"]),m(e(Xe),{"hide-label":e(b)},null,8,["hide-label"]),w.value.hideColumnSetting?z("",!0):(o(),C(e(ws),{key:1,"hide-label":e(b)},null,8,["hide-label"]))]))])):z("",!0),((E=e($).data)==null?void 0:E.data.length)>0?(o(),C(e(Ml),{key:1,class:"flex-1",columns:P.value,rows:N.value,"row-key":"name",options:{selectable:w.value.selectable,showTooltip:!1,resizeColumn:!1,getRowRoute:se=>{var ie,be,ke;return{name:(ie=w.value.rowRoute)==null?void 0:ie.name,params:{[(be=w.value.rowRoute)==null?void 0:be.prop]:se.name},query:{view:(ke=e(i).query)==null?void 0:ke.view}}},emptyState:F.value}},{default:k(()=>[m(e(pt),{class:"sm:mx-5 mx-3"},{default:k(()=>[(o(!0),g(oe,null,ne(P.value,se=>(o(),C(e(ft),{key:se.key,item:se,onColumnWidthUpdated:V[0]||(V[0]=ie=>console.log(ie))},null,8,["item"]))),128))]),_:1}),m(xs,{rows:N.value,"group-by-actions":w.value.groupByActions,onScrollend:kt,class:"list-rows"},{default:k(({idx:se,column:ie,item:be,row:ke})=>[m(e(mt),{item:be,column:ie,row:ke},{default:k(()=>[(o(),C(fe($e(ie,ke,be,se)),{key:ie.key,onClick:Ct=>qe(Ct,ie,ke,be)},null,8,["onClick"]))]),_:2},1032,["item","column","row"])]),_:1},8,["rows","group-by-actions"]),w.value.showSelectBanner?(o(),C(e(yt),{key:0},{actions:k(({selections:se,unselectAll:ie})=>[m(e(at),{options:D(se,ie)},{default:k(()=>[m(M,{icon:"more-horizontal",variant:"ghost"})]),_:1},8,["options"])]),_:1})):z("",!0)]),_:1},8,["columns","rows","options"])):z("",!0),((U=e($).data)==null?void 0:U.data.length)>0?(o(),g("div",Ls,[m(e(Tl),{options:{rowCount:(ce=(Z=e($))==null?void 0:Z.data)==null?void 0:ce.row_count,totalCount:(Ge=(ae=e($))==null?void 0:ae.data)==null?void 0:Ge.total_count},pageLengthCount:h.page_length_count,onLoadMore:V[1]||(V[1]=se=>L(h.page_length_count,!0)),modelValue:h.page_length_count,"onUpdate:modelValue":[V[2]||(V[2]=se=>h.page_length_count=se),V[3]||(V[3]=se=>{L(se)})]},null,8,["options","pageLengthCount","modelValue"])])):e($).loading?(o(),g("div",Rs,[m(e(Jt),{scale:10})])):(o(),C(sl,{key:4,title:F.value.title,icon:F.value.icon,onEmptyStateAction:V[4]||(V[4]=se=>v("emptyStateAction"))},null,8,["title","icon"]))],64)}}});export{oo as E,Us as _};
//# sourceMappingURL=ListViewBuilder.vue_vue_type_script_setup_true_lang-38f9156f.js.map
