import{_ as H}from"./UserAvatar.vue_vue_type_script_setup_true_lang-dd648b68.js";import{m as N,n as V,r as b,e as v,f as $,w as m,l as a,v as _,g as o,h as e,bg as L,q as g,X as D,d as T,U as j,s as q,A as y,Z as A,aY as E,k as w,F as P,G as Q,z as Y,y as G,a3 as X,a7 as Z,M as J,S as K}from"./index-0570e060.js";import{_ as O}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-71e83eb3.js";import{D as W}from"./Dropdown-1e1fbbdd.js";import{_ as F}from"./TextEditor.vue_vue_type_script_setup_true_lang-a6c50ac5.js";import{u as ee}from"./pageMeta-7d9b9003.js";import{x as te}from"./TypingIndicator.vue_vue_type_style_index_0_scoped_3f215bd3_lang-f290abcf.js";import{d as se}from"./dayjs-2cebe90e.js";import{L as ae}from"./LayoutHeader-6b26ba5d.js";import"./Avatar.vue_vue_type_script_setup_true_lang-a0f98d49.js";const le={class:"flex items-center gap-3"},oe={class:"text-2xl font-semibold leading-6 text-gray-900"},ne={class:"flex flex-col gap-4"},ie={__name:"CannedResponseModal",props:N({name:{type:String,required:!1,default:null},isNew:{type:Boolean,required:!1,default:!1}},{modelValue:{},modelModifiers:{},title:{},titleModifiers:{},message:{},messageModifiers:{}}),emits:N(["update"],["update:modelValue","update:title","update:message"]),setup(p,{emit:C}){const h=p,x=V(p,"modelValue"),n=V(p,"title"),i=V(p,"message"),c=C;async function k(){h.name?await D("frappe.client.set_value",{doctype:"HD Canned Response",name:h.name,fieldname:{title:n.value,message:i.value}}):await D("frappe.client.insert",{doc:{doctype:"HD Canned Response",title:n.value,message:i.value}}),c("update"),x.value=!1}return(d,l)=>{const u=b("Dialog");return v(),$(u,{modelValue:x.value,"onUpdate:modelValue":l[2]||(l[2]=f=>x.value=f),options:{size:"xl",actions:[{label:p.isNew?"Create":"Update",variant:"solid",onClick:()=>k()}]}},{"body-title":m(()=>[a("div",le,[a("h3",oe,_(p.isNew?"Create Canned Response":"Edit Canned Response"),1)])]),"body-content":m(()=>[a("div",ne,[a("div",null,[l[3]||(l[3]=a("div",{class:"mb-1.5 text-sm text-gray-600"},_("Title"),-1)),o(e(L),{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=f=>n.value=f),variant:"outline",placeholder:e(g)("Customer Query Resolved")},null,8,["modelValue","placeholder"])]),a("div",null,[l[4]||(l[4]=a("div",{class:"mb-1.5 text-sm text-gray-600"},_("Message"),-1)),o(e(F),{ref:"content",variant:"outline","editor-class":"!prose-sm overflow-auto min-h-[180px] max-h-80 py-1.5 px-2 rounded border border-gray-300 bg-white hover:border-gray-400 hover:shadow-sm focus:bg-white focus:border-gray-500 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400 text-gray-800 transition-colors","bubble-menu":!0,content:i.value,placeholder:e(g)("Your query has been resolved. Thank you for reaching out."),onChange:l[1]||(l[1]=f=>i.value=f)},null,8,["content","placeholder"])])])]),_:1},8,["modelValue","options"])}}},re={class:"flex flex-col"},de={class:"flex items-center gap-2"},ue={class:"flex-1 overflow-y-auto"},me={key:0,class:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 p-4"},pe=["onClick"],ce={class:"flex items-center justify-between"},fe={class:"truncate text-lg font-medium"},ve={class:"mt-2 flex items-center justify-between gap-2"},ge={class:"flex items-center gap-2"},_e={class:"text-sm text-gray-800"},xe={class:"text-sm text-gray-700"},Ne=T({__name:"CannedResponses",setup(p){const{getUser:C}=j(),h=[{label:g("Canned Responses"),route:{name:"CannedResponses"}}],x=q(),n=y(null),i=y(null),c=y(null),k=x.hash.split("#")[1]==="new",d=y(k||!1),l=y(""),u=A({doctype:"HD Canned Response",fields:["name","title","message","owner","modified"],auto:!0,orFilters:{},orderBy:"modified desc"});E(l,r=>{u.update({orFilters:r?{message:["like",`%${r}%`],title:["like",`%${r}%`]}:{}}),u.reload()},{debounce:300});function f(r){n.value=r.title,i.value=r.message,c.value=r.name,d.value=!0}async function B(r){await D("frappe.client.delete",{doctype:"HD Canned Response",name:r}),u.reload()}return ee(()=>({title:g("Canned Responses")})),(r,s)=>{var M;const I=b("FeatherIcon"),R=b("TextInput"),S=K,U=b("Button"),z=H;return v(),w("div",re,[o(e(ae),null,{"left-header":m(()=>[o(e(O),{items:h,class:"-ml-0.5"})]),"right-header":m(()=>[a("div",de,[o(R,{modelValue:l.value,"onUpdate:modelValue":s[0]||(s[0]=t=>l.value=t),type:"text",placeholder:e(g)("Search canned responses"),class:"input input-bordered h-8 px-2 text-sm",style:{"min-width":"290px"}},{prefix:m(()=>[o(I,{name:"search",class:"h-4 w-4 text-gray-500 ml-2"})]),_:1},8,["modelValue","placeholder"]),o(U,{label:e(g)("Create"),theme:"gray",variant:"solid",onClick:s[1]||(s[1]=()=>{n.value=null,i.value=null,d.value=!0})},{prefix:m(()=>[o(S,{class:"h-4 w-4"})]),_:1},8,["label"])])]),_:1}),a("div",ue,[((M=e(u).data)==null?void 0:M.length)>0?(v(),w("div",me,[(v(!0),w(P,null,Q(e(u).data,t=>(v(),w("div",{key:t.name,class:"group flex h-60 cursor-pointer flex-col justify-between gap-2 rounded-lg border px-4 py-3 pt-2 shadow-sm hover:bg-gray-50",onClick:ye=>f(t)},[a("div",ce,[a("div",fe,_(t.title),1),o(e(W),{options:[{label:"Delete",icon:"trash-2",onClick:()=>B(t.name)}],onClick:s[2]||(s[2]=Y(()=>{},["stop"]))},{default:m(()=>[o(U,{icon:"more-horizontal",variant:"ghosted",class:"hover:bg-white"})]),_:1},8,["options"])]),t.message?(v(),$(e(F),{key:0,content:t.message,editable:!1,"editor-class":"prose-sm",class:"flex-1 overflow-hidden response-preview"},null,8,["content"])):G("",!0),a("div",ve,[a("div",ge,[o(z,{name:t.owner,size:"xs"},null,8,["name"]),a("div",_e,_(e(C)(t.owner).full_name),1)]),o(e(J),{text:e(X)(t.modified,e(Z))},{default:m(()=>[a("div",xe,_(e(se).tz(t.modified).fromNow()),1)]),_:2},1032,["text"])])],8,pe))),128))])):(v(),$(te,{key:1,title:e(g)("No Canned Responses Found"),onEmptyStateAction:s[3]||(s[3]=t=>d.value=!0)},null,8,["title"]))]),o(e(ie),{modelValue:d.value,"onUpdate:modelValue":s[4]||(s[4]=t=>d.value=t),title:n.value,"onUpdate:title":s[5]||(s[5]=t=>n.value=t),message:i.value,"onUpdate:message":s[6]||(s[6]=t=>i.value=t),name:c.value,"is-new":!c.value,onClose:s[7]||(s[7]=()=>{d.value=!1,n.value=null,i.value=null,c.value=null}),onUpdate:s[8]||(s[8]=()=>{e(u).reload(),d.value=!1,n.value=null,i.value=null,c.value=null})},null,8,["modelValue","title","message","name","is-new"])])}}});export{Ne as default};
//# sourceMappingURL=CannedResponses-f013c147.js.map
