import{j as ge,e as d,k as $,l as v,d as be,m as te,n as J,p as ve,f as N,w,r as T,g as u,h as s,q as i,s as we,b as Ae,t as xe,v as z,x as ce,y as I,z as ye,A as U,c as oe,B as X,C as Ee,D as Fe,E as Re,F as Y,G as ee,H as ze,I as Ue,u as He,a as Oe,J as L,K as a,L as E,M as de,N as qe,O as Ie,P as me,Q as Je,T as Ze,R as pe,S as Ge}from"./index-70619bb5.js";import{u as Ke}from"./pageMeta-8fdb5c1e.js";import{I as Qe,u as We,g as Xe,c as q}from"./TypingIndicator.vue_vue_type_style_index_0_scoped_3f215bd3_lang-b030ea09.js";import{d as D}from"./dayjs-5868d221.js";import{L as Ye}from"./LayoutHeader-330b6449.js";import{_ as et,E as tt}from"./ListViewBuilder.vue_vue_type_script_setup_true_lang-8d08270a.js";import{I as ot}from"./IndicatorIcon-893ac127.js";import{D as fe}from"./Dropdown-19778bff.js";import{u as lt}from"./ticketStatus-b324718d.js";import"./TabButtons-7d8e5c5a.js";import"./description-7d12a55f.js";import"./DateTimePicker-e0783882.js";import"./useDatePicker-f8eb2ea6.js";import"./DateRangePicker.vue_vue_type_script_setup_true_lang-37cbfe72.js";import"./Link-fff2e6d4.js";import"./StarRating.vue_vue_type_script_setup_true_lang-5b0e6a21.js";import"./NestedPopover-1ff912a7.js";import"./portal-399ac095.js";import"./MultipleAvatar.vue_vue_type_script_setup_true_lang-7d84c5a1.js";import"./Avatar.vue_vue_type_script_setup_true_lang-e2ccf576.js";const nt={},it={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function at(f,p){return d(),$("svg",it,[...p[0]||(p[0]=[v("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.17683 1C4.89138 1 3.81543 1.97482 3.68896 3.25405L3.19111 8.2899C3.16577 8.54615 3.0749 8.79156 2.92723 9.00252L1.98134 10.3538C1.51739 11.0166 1.99155 11.9273 2.80057 11.9273H7.53349V14.4999C7.53349 14.7761 7.75735 14.9999 8.03349 14.9999C8.30963 14.9999 8.53349 14.7761 8.53349 14.4999V11.9273H13.2016C14.0107 11.9273 14.4848 11.0166 14.0209 10.3538L13.068 8.99254C12.9236 8.78634 12.8335 8.54713 12.8059 8.29695L12.246 3.22567C12.1062 1.95882 11.0357 1 9.76113 1H6.17683ZM4.68411 3.35243C4.75999 2.5849 5.40556 2 6.17683 2H9.76113C10.5259 2 11.1682 2.57529 11.2521 3.3354L11.8119 8.40668C11.858 8.82365 12.0082 9.22233 12.2488 9.566L13.2016 10.9273H2.80057L3.74646 9.57598C3.99257 9.22439 4.14403 8.81536 4.18625 8.38828L4.68411 3.35243Z",fill:"currentColor"},null,-1)])])}const st=ge(nt,[["render",at]]),rt={},ut={width:"15",height:"14",viewBox:"0 0 15 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function ct(f,p){return d(),$("svg",ut,[...p[0]||(p[0]=[v("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.1783 0C3.89284 0 2.81689 0.974825 2.69042 2.25405L2.19257 7.2899C2.16724 7.54615 2.07636 7.79156 1.92869 8.00252L0.982801 9.35379C0.518857 10.0166 0.99301 10.9273 1.80203 10.9273H6.53506V13.4998C6.53506 13.776 6.75892 13.9998 7.03506 13.9998C7.31121 13.9998 7.53506 13.776 7.53506 13.4998V10.9273H12.2031C13.0121 10.9273 13.4863 10.0166 13.0223 9.35379L12.0695 7.99254C11.9251 7.78634 11.835 7.54713 11.8074 7.29695L11.2475 2.22567C11.1076 0.958818 10.0371 0 8.76259 0H5.1783ZM3.68557 2.35243C3.76145 1.5849 4.40702 1 5.1783 1H8.76259C9.52732 1 10.1696 1.57529 10.2535 2.3354L10.8134 7.40668C10.8594 7.82365 11.0097 8.22233 11.2502 8.566L12.2031 9.92725H1.80203L2.74793 8.57598C2.99404 8.22439 3.1455 7.81536 3.18772 7.38828L3.68557 2.35243Z",fill:"currentColor"},null,-1),v("rect",{x:"0.792893",width:"2",height:"17",rx:"1",transform:"rotate(-45 0.792893 0)",fill:"currentColor",class:"stroke stroke-ink-white"},null,-1)])])}const dt=ge(rt,[["render",ct]]),mt={class:"mt-3"},pt=be({__name:"ExportModal",props:te({rowCount:{}},{modelValue:{},modelModifiers:{}}),emits:te(["update"],["update:modelValue"]),setup(f,{emit:p}){const r=p,b=J(f,"modelValue"),x=ve({export_type:"Excel",export_all:!1});return(V,y)=>{const c=T("FormControl"),_=T("Button"),l=T("Dialog");return d(),N(l,{modelValue:b.value,"onUpdate:modelValue":y[3]||(y[3]=o=>b.value=o),options:{title:"Export"}},{"body-content":w(()=>[u(c,{modelValue:x.export_type,"onUpdate:modelValue":y[0]||(y[0]=o=>x.export_type=o),variant:"outline",label:s(i)("Export Type"),type:"select",options:[{label:"Excel",value:"Excel"},{label:"CSV",value:"CSV"}],placeholder:s(i)("Excel")},null,8,["modelValue","label","placeholder"]),v("div",mt,[u(c,{modelValue:x.export_all,"onUpdate:modelValue":y[1]||(y[1]=o=>x.export_all=o),type:"checkbox",label:`Export All ${V.rowCount} Record(s)`},null,8,["modelValue","label"])])]),actions:w(()=>[u(_,{label:s(i)("Download"),variant:"solid",onClick:y[2]||(y[2]=()=>r("update",x)),class:"w-full"},null,8,["label"])]),_:1},8,["modelValue"])}}}),ft={class:"flex items-center -ml-0.5"},gt=["onClick"],bt={class:"flex items-center"},vt={class:"whitespace-nowrap"},wt={key:0,class:"flex flex-row-reverse gap-2 items-center min-w-11"},xt={__name:"ViewBreadcrumbs",props:{routeName:{type:String,required:!0},label:{type:String,required:!0},options:{type:Array,required:!0},dropdownActions:{type:Function,required:!0},currentView:{type:Object,required:!0}},setup(f){const p=we(),{isMobileView:r}=Ae(),b=x=>p.query.view?x.name===p.query.view:!1;return(x,V)=>{const y=T("router-link"),c=T("FeatherIcon"),_=T("Button");return d(),$("div",ft,[u(y,{to:{name:f.routeName},class:"px-0.5 py-1 text-lg font-medium focus:outline-none focus-visible:ring-2 focus-visible:ring-outline-gray-3 text-ink-gray-5 hover:text-ink-gray-7 flex items-center justify-center"},{default:w(()=>[xe(z(s(r)?"...":f.label),1)]),_:1},8,["to"]),V[1]||(V[1]=v("span",{class:"mx-0.5 text-base text-ink-gray-4","aria-hidden":"true"}," / ",-1)),u(s(fe),{options:f.options},{default:w(({open:l})=>[u(_,{variant:"ghost",class:"text-lg font-medium text-nowrap",label:f.currentView.label},{prefix:w(()=>[typeof f.currentView.icon=="string"?(d(),N(s(Qe),{key:0,icon:f.currentView.icon,class:"h-4"},null,8,["icon"])):(d(),N(ce(f.currentView.icon),{key:1,class:"h-4 flex items-center justify-center"}))]),suffix:w(()=>[u(c,{name:l?"chevron-up":"chevron-down",class:"h-4 text-ink-gray-8"},null,8,["name"])]),_:2},1032,["label"])]),item:w(({item:l})=>[v("button",{class:"group flex text-ink-gray-6 gap-4 h-7 w-full justify-between items-center rounded px-2 text-base hover:bg-surface-gray-3",onClick:l.onClick},[v("div",bt,[l.icon&&typeof l.icon=="string"?(d(),N(c,{key:0,name:l.icon,class:"mr-2 h-4 w-4 flex-shrink-0 text-ink-gray-7","aria-hidden":"true"},null,8,["name"])):l.icon?(d(),N(ce(l.icon),{key:1,class:"mr-2 h-4 w-4 flex-shrink-0 text-ink-gray-7"})):I("",!0),v("span",vt,z(l.label),1)]),l.name?(d(),$("div",wt,[u(s(fe),{placement:"right-start",options:f.dropdownActions(l)},{default:w(()=>[u(_,{variant:"ghost",class:"group-hover:!size-5 !size-0 group-hover:opacity-100 opacity-0 group-hover:ml-0 -ml-2",icon:"more-horizontal",onClick:V[0]||(V[0]=ye(()=>{},["stop"]))})]),_:1},8,["options"]),b(l)?(d(),N(c,{key:0,name:"check",class:"size-4 text-ink-gray-7"})):I("",!0)])):I("",!0)],8,gt)]),_:1},8,["options"])])}}},yt={class:"text-base"},kt={key:0,class:"px-2 py-1 flex items-center justify-center gap-2 rounded-full bg-surface-modal shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none"},_t=["onClick"],ht={key:1,class:"my-3 max-w-max transform bg-surface-white px-4 sm:px-0"},Ct={class:"relative max-h-96 pb-3 overflow-y-auto min-w-40 rounded-lg bg-surface-modal shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none"},Vt={class:"flex gap-2 px-3 pb-1 pt-3"},$t={class:"flex-1"},St={class:"sticky top-0 bg-surface-modal pb-2 pt-3 text-sm text-ink-gray-7"},Lt={class:"grid w-96 grid-cols-12 place-items-center"},Tt=["onClick","title"],jt={__name:"IconPicker",props:{modelValue:{},modelModifiers:{},reaction:{},reactionModifiers:{}},emits:["update:modelValue","update:reaction"],setup(f,{expose:p}){const r=U(""),b=J(f,"modelValue"),x=J(f,"reaction"),V=U(["ðŸ‘","â¤ï¸","ðŸ˜‚","ðŸ˜®","ðŸ˜¢","ðŸ™"]),y=oe(()=>{let l={};for(let o of X){if(r.value&&![o.description,...o.names,...o.tags].join(" ").toLowerCase().includes(r.value.toLowerCase()))continue;let B=l[o.category];B||(l[o.category]=[],B=l[o.category]),B.push(o)}return Object.keys(l).length||(l["No results"]=[]),l});function c(){let l=X.length,o=_(0,l-1);b.value=X[o].emoji}function _(l,o){return Math.floor(Math.random()*(o-l+1)+l)}return p({setRandom:c}),(l,o)=>{const B=T("Button"),H=T("FormControl");return d(),N(s(ze),{transition:"default"},{target:w(({togglePopover:h,isOpen:C})=>[Ee(l.$slots,"default",Fe(Re({isOpen:C,togglePopover:h})),()=>[v("span",yt,z(f.modelValue||""),1)])]),body:w(({togglePopover:h})=>[x.value?(d(),$("div",kt,[(d(!0),$(Y,null,ee(V.value,C=>(d(),$("div",{class:"size-5 cursor-pointer rounded-full bg-surface-transparent text-xl",key:C,onClick:()=>(b.value=C)&&h()},[v("button",null,z(C),1)],8,_t))),128)),u(B,{class:"rounded-full",icon:"plus",onClick:o[0]||(o[0]=ye(()=>x.value=!1,["stop"]))})])):(d(),$("div",ht,[v("div",Ct,[v("div",Vt,[v("div",$t,[u(H,{type:"text",placeholder:s(i)("Search by keyword"),modelValue:r.value,"onUpdate:modelValue":o[1]||(o[1]=C=>r.value=C),debounce:300},null,8,["placeholder","modelValue"])]),u(B,{onClick:c},{default:w(()=>[...o[2]||(o[2]=[xe("Random",-1)])]),_:1})]),o[3]||(o[3]=v("div",{class:"w-96"},null,-1)),(d(!0),$(Y,null,ee(y.value,(C,O)=>(d(),$("div",{class:"px-3",key:O},[v("div",St,z(O),1),v("div",Lt,[(d(!0),$(Y,null,ee(C,j=>(d(),$("button",{class:"h-8 w-8 rounded-md p-1 text-2xl hover:bg-surface-gray-2 focus:outline-none focus:ring focus:ring-blue-200",key:j.description,onClick:()=>(b.value=j.emoji)&&h(),title:j.description},z(j.emoji),9,Tt))),128))])]))),128))])]))]),_:3})}}},Mt={class:"flex gap-2"},Dt={__name:"ViewModal",props:{modelValue:{},modelModifiers:{}},emits:te(["update"],["update:modelValue"]),setup(f,{emit:p}){let r=J(f,"modelValue");const b=U({label:r.value.view.label||"",icon:r.value.view.icon||"",name:r.value.view.name||""}),x=oe(()=>({modalTitle:r.value.mode==="edit"?"Edit View":r.value.mode==="duplicate"?"Duplicate View":"Create View",buttonLabel:r.value.mode==="edit"?"Update":r.value.mode==="duplicate"?"Duplicate":"Create",action:r.value.mode==="edit"?"update":r.value.mode==="duplicate"?"duplicate":"create"})),V=p;return(y,c)=>{const _=T("Button"),l=T("FormControl");return d(),N(s(Ue),{modelValue:s(r).show,"onUpdate:modelValue":c[3]||(c[3]=o=>s(r).show=o),options:{title:x.value.modalTitle}},{"body-content":w(()=>[c[4]||(c[4]=v("div",{class:"mb-1.5 block text-base text-ink-gray-5"},"View Name",-1)),v("div",Mt,[u(jt,{modelValue:b.value.icon,"onUpdate:modelValue":c[0]||(c[0]=o=>b.value.icon=o)},{default:w(({togglePopover:o})=>[u(_,{size:"md",class:"flex size-8 text-2xl leading-none",label:b.value.icon,onClick:o},null,8,["label","onClick"])]),_:1},8,["modelValue"]),u(l,{class:"flex-1",size:"md",type:"text",placeholder:s(i)("My Open Tickets"),modelValue:b.value.label,"onUpdate:modelValue":c[1]||(c[1]=o=>b.value.label=o)},null,8,["placeholder","modelValue"])])]),actions:w(()=>[u(_,{label:x.value.buttonLabel,variant:"solid",onClick:c[2]||(c[2]=o=>V("update",b.value,x.value.action)),class:"w-full"},null,8,["label"])]),_:1},8,["modelValue","options"])}}},Nt=Dt,eo=be({__name:"Tickets",setup(f){const p=He(),r=we(),{getCurrentUserViews:b,createView:x,publicViews:V,pinnedViews:y,findView:c,updateView:_,deleteView:l}=We("HD Ticket"),{$dialog:o,$socket:B}=Xe(),{isManager:H}=Oe(),h=U(null),C=U(!1),{getStatus:O}=lt(),j=U(new Set),ke=[{label:i("Export"),icon:"download",onClick:t=>{j.value=new Set(t),C.value=!0}}],_e={doctype:"HD Ticket",columnConfig:{status:{custom:({item:t})=>{const e=O(t),n=L.value?e==null?void 0:e.label_customer:e==null?void 0:e.label_agent;return a("div",{class:"flex items-center space-x-2 justify-start w-full"},[a(ot,{class:e==null?void 0:e.parsed_color}),a("span",{class:"truncate flex-1"},n)])}},agreement_status:{custom:({item:t})=>a(E,{label:t,theme:De[t],variant:"outline"})},response_by:{custom:({row:t,item:e})=>he(t,e)},resolution_by:{custom:({row:t,item:e})=>Ce(t,e)},custom_last_sentiment:{custom:({item:t})=>le(je(t))},custom_sentiment_trend:{custom:({item:t})=>le(Me(t))},custom_effort_score:{custom:({row:t,item:e})=>Le(e,ae(t.custom_effort_band))},custom_effort_band:{custom:({item:t})=>Te(ae(t))}},isCustomerPortal:L.value,selectable:!0,showSelectBanner:!0,selectBannerActions:ke,emptyState:{title:i("No Tickets Found"),icon:a(Ze,{class:"h-10 w-10"})},rowRoute:{name:L.value?"TicketCustomer":"TicketAgent",prop:"ticketId"},hideColumnSetting:!1};function he(t,e){return!t.first_responded_on&&D(e).isBefore(new Date)?a(E,{label:i("Failed"),theme:"red",variant:"outline"}):t.first_responded_on&&D(t.first_responded_on).isBefore(e)?a(E,{label:i("Fulfilled"),theme:"green",variant:"outline"}):D(t.first_responded_on).isAfter(e)?a(E,{label:i("Failed"),theme:"red",variant:"outline"}):a(de,{text:D(e).long()},()=>D.tz(e).fromNow())}function Ce(t,e){return(O(t.status)||{}).category==="Paused"?a(E,{label:i("Paused"),theme:"blue",variant:"outline"}):t.resolution_date&&D(t.resolution_date).isBefore(e)?a(E,{label:i("Fulfilled"),theme:"green",variant:"outline"}):D(t.resolution_date).isAfter(e)?a(E,{label:i("Failed"),theme:"red",variant:"outline"}):a(de,{text:D(e).long()},()=>D.tz(e).fromNow())}async function Ve(t="Excel",e=!1){var A;const n=(A=h.value)==null?void 0:A.list;if(!n)return;const g=JSON.stringify(n.data.columns.map(k=>k.key)),P=n.params.order_by;let S={...n.params.filters},M;e?(S=JSON.stringify(S),M=n.data.total_count):(M=j.value.size,S.name=["in",Array.from(j.value)],S=JSON.stringify(S)),window.location.href=`/api/method/frappe.desk.reportview.export_query?file_format_type=${t}&title=HD Ticket&doctype=HD Ticket&fields=${g}&filters=${S}&order_by=${P}&page_length=${M}&start=0&view=Report&with_comment_count=1`,$e(),C.value=!1}function $e(t=!1){var e,n;(e=h.value)==null||e.unselectAll(),(n=j.value)==null||n.clear(),t&&h.value.reload()}const Z={positive:{emoji:"ðŸ˜Š",bg:"bg-green-50",text:"text-green-700",label:i("Positive")},neutral:{emoji:"ðŸ˜",bg:"bg-gray-100",text:"text-gray-700",label:i("Neutral")},negative:{emoji:"ðŸ™",bg:"bg-red-50",text:"text-red-700",label:i("Negative")}},G={improving:{emoji:"ðŸ“ˆ",bg:"bg-green-50",text:"text-green-700",label:i("Improving")},stable:{emoji:"âš–ï¸",bg:"bg-indigo-50",text:"text-indigo-700",label:i("Stable")},declining:{emoji:"ðŸ“‰",bg:"bg-red-50",text:"text-red-700",label:i("Declining")}},Se={low:{emoji:"ðŸŸ¢",bg:"bg-emerald-50",text:"text-emerald-700"},medium:{emoji:"ðŸŸ¡",bg:"bg-amber-50",text:"text-amber-700"},high:{emoji:"ðŸ”´",bg:"bg-rose-50",text:"text-rose-700"}};function le(t){return a("div",{class:`inline-flex items-center gap-1 rounded-full px-2.5 py-1 text-xs font-medium ${t.bg} ${t.text}`},[a("span",{class:"text-base"},t.emoji),a("span",t.label)])}function ne(t){return Se[(t||"").toString().toLowerCase()]||{emoji:"âšª",bg:"bg-gray-50",text:"text-gray-700"}}function Le(t,e){const n=ne(e),g=typeof t=="number"?t.toFixed(1):t||"â€“";return a("div",{class:`inline-flex items-center gap-2 rounded-full px-2.5 py-1 text-xs font-medium ${n.bg} ${n.text}`},[a("span",n.emoji),a("span",{class:"font-semibold"},`${g}`)])}function Te(t){const e=ne(t),n=t||"Unknown";return a("div",{class:`inline-flex items-center gap-2 rounded-full px-2.5 py-1 text-xs font-medium ${e.bg} ${e.text}`},[a("span",e.emoji),a("span",{class:"uppercase tracking-wide"},n)])}function ie(t){return t==null?void 0:t.toString().trim().toLowerCase()}function je(t){const e=ie(t);return["positive","olumlu"].includes(e)?Z.positive:["negative","olumsuz"].includes(e)?Z.negative:["neutral","nÃ¶tr","notr"].includes(e)?Z.neutral:{emoji:"â”",bg:"bg-gray-50",text:"text-gray-700",label:t||"Unknown"}}function Me(t){const e=ie(t);return["improving","artÄ±yor","artiyor"].includes(e)?G.improving:["declining","dÃ¼ÅŸÃ¼yor","dusuyor","azalÄ±yor","azaliyor"].includes(e)?G.declining:["stable","stabil"].includes(e)?G.stable:{emoji:"â”",bg:"bg-gray-50",text:"text-gray-700",label:t||"Unknown"}}function ae(t){if(t)return typeof t=="string"?t:typeof t=="object"?t.value||t.label||t.name:String(t)}const De={Fulfilled:"green",Failed:"red","Resolution Due":"orange","First Response Due":"orange",Paused:"blue"};let m=ve({show:!1,view:{label:"",icon:"",name:""},mode:"create"});const Ne=oe(()=>{var e,n,g;const t=[{group:"Default Views",items:[{label:i("List View"),icon:"align-justify",onClick:()=>p.push({name:L.value?"TicketsCustomer":"TicketsAgent"})}]}];return((e=b.value)==null?void 0:e.length)!==0&&t.push({group:"Saved Views",items:K(b.value)}),((n=y.value)==null?void 0:n.length)!==0&&t.push({group:"Private Views",items:K(y.value)}),((g=V.value)==null?void 0:g.length)!==0&&t.push({group:"Public Views",items:K(V.value)}),t.push({group:"Create View",hideLabel:!0,items:[{label:i("Create View"),icon:"plus",onClick:()=>{se(),m.show=!0}}]}),t});let F=null;const Be=t=>{const e=c(t.name).value;let n=[{group:"Default Views",hideLabel:!0,items:[{label:i("Duplicate"),icon:a(pe,{name:"copy"}),onClick:()=>{m.view.label=e.label+" (New)",m.view.icon=e.icon,m.view.name=e.name,m.mode="duplicate",F=e,m.show=!0}}]}];return(!e.public||H)&&(n[0].items.push({label:i("Edit"),icon:a(tt,{class:"h-4 w-4"}),onClick:()=>{m.view.label=e.label,m.view.icon=e.icon,m.view.name=e.name,m.mode="edit",m.show=!0}}),e.public||n[0].items.push({label:e!=null&&e.pinned?"Unpin View":"Pin View",icon:a(e!=null&&e.pinned?dt:st,{class:"h-4 w-4"}),onClick:()=>{const g={name:e.name};g.pinned=!e.pinned,_(g)}}),H&&!L.value&&n[0].items.push({label:e!=null&&e.public?"Make Private":"Make Public",icon:a(pe,{name:e!=null&&e.public?"lock":"unlock",class:"h-4 w-4"}),onClick:()=>{const g={name:e.name,public:!e.public};e.public?o({title:`Make ${e.label} private?`,message:"This view is currently public. Changing it to private will hide it for all the users.",actions:[{label:i("Confirm"),variant:"solid",onClick({close:P}){P(),_(g)}}]}):_(g)}}),n.push({group:"Delete View",hideLabel:!0,items:[{label:i("Delete"),icon:"trash-2",onClick:()=>{o({title:`Delete ${e.label}?`,message:`Are you sure you want to delete this view?
              ${e.public?"This view is public, and will be removed for all users.":""}`,actions:[{label:i("Confirm"),variant:"solid",onClick({close:g}){r.query.view===e.name&&p.push({name:L.value?"TicketsCustomer":"TicketsAgent"}),l(e.name),Q("deleted"),g()}}]})}}]})),n};function K(t){return t==null?void 0:t.map(e=>({...e,onClick:()=>{q.value={label:e.label,icon:e.icon},p.push({name:e.route_name,query:{view:e.name}})}}))}function Pe(t,e){var g,P,S,M,A,k,R,re,ue;let n;if(e==="update"){_(t),Q("updated"),q.value={label:t.label,icon:me(t.icon)};return}else e==="duplicate"?n={...F,filters:JSON.stringify(F.filters),columns:JSON.stringify(F.columns),rows:JSON.stringify(F.rows),label:t.label,icon:t.icon,public:!1,pinned:!1}:n={dt:"HD Ticket",type:"list",label:t.label??"List",icon:t.icon??"",route_name:p.currentRoute.value.name,order_by:(P=(g=h.value)==null?void 0:g.list)==null?void 0:P.params.order_by,filters:JSON.stringify((M=(S=h.value)==null?void 0:S.list)==null?void 0:M.params.filters),columns:JSON.stringify((k=(A=h.value)==null?void 0:A.list)==null?void 0:k.data.columns),rows:JSON.stringify((ue=(re=(R=h.value)==null?void 0:R.list)==null?void 0:re.data)==null?void 0:ue.rows),is_customer_portal:L.value};x(n,W=>{q.value={label:W.label||"List",icon:me(W.icon)},p.push({name:L.value?"TicketsCustomer":"TicketsAgent",query:{view:W.name}}),Q()})}function Q(t="created"){Je.success(`View ${t}`),se()}function se(){m.show=!1,m.view.label="",m.view.icon="",m.view.name="",m.mode=null,F=null}return qe(()=>{r.query.view||(q.value={label:i("List"),icon:"lucide:align-justify"}),B.on("helpdesk:new-ticket",()=>{var t;(t=h.value)==null||t.reload()})}),Ke(()=>({title:i("Tickets")})),(t,e)=>{var S,M,A;const n=Ge,g=T("Button"),P=T("RouterLink");return d(),$("div",null,[u(s(Ye),null,{"left-header":w(()=>[u(xt,{label:s(i)("Tickets"),"route-name":s(L)?"TicketsCustomer":"TicketsAgent",options:Ne.value,"dropdown-actions":Be,"current-view":s(q)},null,8,["label","route-name","options","current-view"])]),"right-header":w(()=>[u(P,{to:{name:s(L)?"TicketNew":"TicketAgentNew"}},{default:w(()=>[u(g,{label:s(i)("Create"),theme:"gray",variant:"solid"},{prefix:w(()=>[u(n,{class:"h-4 w-4"})]),_:1},8,["label"])]),_:1},8,["to"])]),_:1}),u(s(et),{ref_key:"listViewRef",ref:h,options:_e,onEmptyStateAction:e[0]||(e[0]=()=>t.$router.push({name:s(L)?"TicketNew":"TicketAgentNew"})),onRowClick:e[1]||(e[1]=k=>t.$router.push({name:s(L)?"TicketCustomer":"TicketAgent",params:{ticketId:k}}))},null,512),u(pt,{modelValue:C.value,"onUpdate:modelValue":e[2]||(e[2]=k=>C.value=k),rowCount:((A=(M=(S=t.$refs.listViewRef)==null?void 0:S.list)==null?void 0:M.data)==null?void 0:A.total_count)??0,onUpdate:e[3]||(e[3]=({export_type:k,export_all:R})=>Ve(k,R))},null,8,["modelValue","rowCount"]),s(m).show?(d(),N(Nt,{key:0,modelValue:s(m),"onUpdate:modelValue":e[4]||(e[4]=k=>Ie(m)?m.value=k:m=k),onUpdate:e[5]||(e[5]=(k,R)=>Pe(k,R))},null,8,["modelValue"])):I("",!0)])}}});export{eo as default};
//# sourceMappingURL=Tickets-ea14a50c.js.map
